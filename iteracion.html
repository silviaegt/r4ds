<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>21 Iteración | R para Ciencia de Datos</title>
  <meta name="description" content="Este texto te enseñará cómo hacer ciencia de datos con R: aprenderás a importar datos, llevarlos a la estructura más conveniente, transformarlos, visualizarlos y modelarlos. Con él podrás poner en pŕactica las habilidades necesarias para hacer ciencia de datos. Tal como los químicos aprenden a limpiar tubos de ensayo y ordenar un laboratorio, aprenderás a limpiar datos y crear gráficos— junto a muchas otras habilidades que permiten que la ciencia de datos tenga lugar. En este libro encontrarás las mejores prácticas para desarrollar dichas tareas usando R. También aprenderás a usar la gramática de gráficos, programación letrada e investigación reproducible para ahorrar tiempo. Además, aprenderás a manejar recursos cognitivos para facilitar el hacer descubrimientos al momento de manipular, visualizar y explorar datos." />
  <meta name="generator" content="bookdown 0.13 and GitBook 2.6.7" />

  <meta property="og:title" content="21 Iteración | R para Ciencia de Datos" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="http://es.r4ds.hadley.nz/" />
  <meta property="og:image" content="http://es.r4ds.hadley.nz/cover.png" />
  <meta property="og:description" content="Este texto te enseñará cómo hacer ciencia de datos con R: aprenderás a importar datos, llevarlos a la estructura más conveniente, transformarlos, visualizarlos y modelarlos. Con él podrás poner en pŕactica las habilidades necesarias para hacer ciencia de datos. Tal como los químicos aprenden a limpiar tubos de ensayo y ordenar un laboratorio, aprenderás a limpiar datos y crear gráficos— junto a muchas otras habilidades que permiten que la ciencia de datos tenga lugar. En este libro encontrarás las mejores prácticas para desarrollar dichas tareas usando R. También aprenderás a usar la gramática de gráficos, programación letrada e investigación reproducible para ahorrar tiempo. Además, aprenderás a manejar recursos cognitivos para facilitar el hacer descubrimientos al momento de manipular, visualizar y explorar datos." />
  <meta name="github-repo" content="cienciadedatos/r4ds" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="21 Iteración | R para Ciencia de Datos" />
  
  <meta name="twitter:description" content="Este texto te enseñará cómo hacer ciencia de datos con R: aprenderás a importar datos, llevarlos a la estructura más conveniente, transformarlos, visualizarlos y modelarlos. Con él podrás poner en pŕactica las habilidades necesarias para hacer ciencia de datos. Tal como los químicos aprenden a limpiar tubos de ensayo y ordenar un laboratorio, aprenderás a limpiar datos y crear gráficos— junto a muchas otras habilidades que permiten que la ciencia de datos tenga lugar. En este libro encontrarás las mejores prácticas para desarrollar dichas tareas usando R. También aprenderás a usar la gramática de gráficos, programación letrada e investigación reproducible para ahorrar tiempo. Además, aprenderás a manejar recursos cognitivos para facilitar el hacer descubrimientos al momento de manipular, visualizar y explorar datos." />
  <meta name="twitter:image" content="http://es.r4ds.hadley.nz/cover.png" />

<meta name="author" content="Garrett Grolemund" />
<meta name="author" content="Hadley Wickham" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="vectores.html"/>
<link rel="next" href="model-intro.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets-1.3/htmlwidgets.js"></script>
<link href="libs/str_view-0.1.0/str_view.css" rel="stylesheet" />
<script src="libs/str_view-binding-1.4.0/str_view.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/Proj4Leaflet-1.0.1/proj4-compressed.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.2/leaflet.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="r4ds.min.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><strong><a href="./">R para Ciencia de Datos</a></strong></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Bienvenida</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#sobre-la-traduccion"><i class="fa fa-check"></i>Sobre la traducción</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#sobre-la-version-original-en-ingles"><i class="fa fa-check"></i>Sobre la versión original en inglés</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="introduccion.html"><a href="introduccion.html"><i class="fa fa-check"></i><b>1</b> Introducción</a><ul>
<li class="chapter" data-level="1.1" data-path="introduccion.html"><a href="introduccion.html#lo-que-aprenderas"><i class="fa fa-check"></i><b>1.1</b> Lo que aprenderás</a></li>
<li class="chapter" data-level="1.2" data-path="introduccion.html"><a href="introduccion.html#como-esta-organizado-este-libro"><i class="fa fa-check"></i><b>1.2</b> Cómo está organizado este libro</a></li>
<li class="chapter" data-level="1.3" data-path="introduccion.html"><a href="introduccion.html#que-no-vas-a-aprender"><i class="fa fa-check"></i><b>1.3</b> Qué no vas a aprender</a><ul>
<li class="chapter" data-level="1.3.1" data-path="introduccion.html"><a href="introduccion.html#big-data"><i class="fa fa-check"></i><b>1.3.1</b> Big data</a></li>
<li class="chapter" data-level="1.3.2" data-path="introduccion.html"><a href="introduccion.html#python-julia-y-amigos"><i class="fa fa-check"></i><b>1.3.2</b> Python, Julia y amigos</a></li>
<li class="chapter" data-level="1.3.3" data-path="introduccion.html"><a href="introduccion.html#datos-no-rectangulares"><i class="fa fa-check"></i><b>1.3.3</b> Datos no rectangulares</a></li>
<li class="chapter" data-level="1.3.4" data-path="introduccion.html"><a href="introduccion.html#confirmacion-de-hipotesis"><i class="fa fa-check"></i><b>1.3.4</b> Confirmación de hipótesis</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="introduccion.html"><a href="introduccion.html#prerrequisitos"><i class="fa fa-check"></i><b>1.4</b> Prerrequisitos</a><ul>
<li class="chapter" data-level="1.4.1" data-path="introduccion.html"><a href="introduccion.html#r"><i class="fa fa-check"></i><b>1.4.1</b> R</a></li>
<li class="chapter" data-level="1.4.2" data-path="introduccion.html"><a href="introduccion.html#rstudio"><i class="fa fa-check"></i><b>1.4.2</b> RStudio</a></li>
<li class="chapter" data-level="1.4.3" data-path="introduccion.html"><a href="introduccion.html#el-tidyverse"><i class="fa fa-check"></i><b>1.4.3</b> El Tidyverse</a></li>
<li class="chapter" data-level="1.4.4" data-path="introduccion.html"><a href="introduccion.html#el-paquete-datos"><i class="fa fa-check"></i><b>1.4.4</b> El paquete <code>datos</code></a></li>
<li class="chapter" data-level="1.4.5" data-path="introduccion.html"><a href="introduccion.html#otros-paquetes"><i class="fa fa-check"></i><b>1.4.5</b> Otros paquetes</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="introduccion.html"><a href="introduccion.html#ejecutar-codigo-en-r"><i class="fa fa-check"></i><b>1.5</b> Ejecutar código en R</a></li>
<li class="chapter" data-level="1.6" data-path="introduccion.html"><a href="introduccion.html#pedir-ayuda-y-aprender-mas"><i class="fa fa-check"></i><b>1.6</b> Pedir ayuda y aprender más</a></li>
<li class="chapter" data-level="1.7" data-path="introduccion.html"><a href="introduccion.html#agradecimientos"><i class="fa fa-check"></i><b>1.7</b> Agradecimientos</a></li>
<li class="chapter" data-level="1.8" data-path="introduccion.html"><a href="introduccion.html#colofon"><i class="fa fa-check"></i><b>1.8</b> Colofón</a></li>
</ul></li>
<li class="part"><span><b>I Explorar</b></span></li>
<li class="chapter" data-level="2" data-path="explorar-introduccion.html"><a href="explorar-introduccion.html"><i class="fa fa-check"></i><b>2</b> Introducción</a></li>
<li class="chapter" data-level="3" data-path="visualizacion-de-datos.html"><a href="visualizacion-de-datos.html"><i class="fa fa-check"></i><b>3</b> Visualización de datos</a><ul>
<li class="chapter" data-level="3.1" data-path="visualizacion-de-datos.html"><a href="visualizacion-de-datos.html#introduccion-1"><i class="fa fa-check"></i><b>3.1</b> Introducción</a><ul>
<li class="chapter" data-level="3.1.1" data-path="visualizacion-de-datos.html"><a href="visualizacion-de-datos.html#prerrequisitos-1"><i class="fa fa-check"></i><b>3.1.1</b> Prerrequisitos</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="visualizacion-de-datos.html"><a href="visualizacion-de-datos.html#primeros-pasos"><i class="fa fa-check"></i><b>3.2</b> Primeros pasos</a><ul>
<li class="chapter" data-level="3.2.1" data-path="visualizacion-de-datos.html"><a href="visualizacion-de-datos.html#el-data-frame-millas"><i class="fa fa-check"></i><b>3.2.1</b> El data frame <code>millas</code></a></li>
<li class="chapter" data-level="3.2.2" data-path="visualizacion-de-datos.html"><a href="visualizacion-de-datos.html#creando-un-grafico-con-ggplot"><i class="fa fa-check"></i><b>3.2.2</b> Creando un gráfico con ggplot</a></li>
<li class="chapter" data-level="3.2.3" data-path="visualizacion-de-datos.html"><a href="visualizacion-de-datos.html#una-plantilla-de-graficos"><i class="fa fa-check"></i><b>3.2.3</b> Una plantilla de gráficos</a></li>
<li class="chapter" data-level="3.2.4" data-path="visualizacion-de-datos.html"><a href="visualizacion-de-datos.html#ejercicios"><i class="fa fa-check"></i><b>3.2.4</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="visualizacion-de-datos.html"><a href="visualizacion-de-datos.html#mapeos-esteticos"><i class="fa fa-check"></i><b>3.3</b> Mapeos estéticos</a><ul>
<li class="chapter" data-level="3.3.1" data-path="visualizacion-de-datos.html"><a href="visualizacion-de-datos.html#ejercicios-1"><i class="fa fa-check"></i><b>3.3.1</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="visualizacion-de-datos.html"><a href="visualizacion-de-datos.html#problemas-comunes"><i class="fa fa-check"></i><b>3.4</b> Problemas comunes</a></li>
<li class="chapter" data-level="3.5" data-path="visualizacion-de-datos.html"><a href="visualizacion-de-datos.html#separar-en-facetas"><i class="fa fa-check"></i><b>3.5</b> Separar en facetas</a><ul>
<li class="chapter" data-level="3.5.1" data-path="visualizacion-de-datos.html"><a href="visualizacion-de-datos.html#ejercicios-2"><i class="fa fa-check"></i><b>3.5.1</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="visualizacion-de-datos.html"><a href="visualizacion-de-datos.html#objetos-geometricos"><i class="fa fa-check"></i><b>3.6</b> Objetos geométricos</a><ul>
<li class="chapter" data-level="3.6.1" data-path="visualizacion-de-datos.html"><a href="visualizacion-de-datos.html#ejercicios-3"><i class="fa fa-check"></i><b>3.6.1</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="visualizacion-de-datos.html"><a href="visualizacion-de-datos.html#transformaciones-estadisticas"><i class="fa fa-check"></i><b>3.7</b> Transformaciones estadísticas</a><ul>
<li class="chapter" data-level="3.7.1" data-path="visualizacion-de-datos.html"><a href="visualizacion-de-datos.html#ejercicios-4"><i class="fa fa-check"></i><b>3.7.1</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="visualizacion-de-datos.html"><a href="visualizacion-de-datos.html#ajustes-de-posicion"><i class="fa fa-check"></i><b>3.8</b> Ajustes de posición</a><ul>
<li class="chapter" data-level="3.8.1" data-path="visualizacion-de-datos.html"><a href="visualizacion-de-datos.html#ejercicios-5"><i class="fa fa-check"></i><b>3.8.1</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="3.9" data-path="visualizacion-de-datos.html"><a href="visualizacion-de-datos.html#sistemas-de-coordenadas"><i class="fa fa-check"></i><b>3.9</b> Sistemas de coordenadas</a><ul>
<li class="chapter" data-level="3.9.1" data-path="visualizacion-de-datos.html"><a href="visualizacion-de-datos.html#ejercicios-6"><i class="fa fa-check"></i><b>3.9.1</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="3.10" data-path="visualizacion-de-datos.html"><a href="visualizacion-de-datos.html#la-gramatica-de-graficos-en-capas"><i class="fa fa-check"></i><b>3.10</b> La gramática de gráficos en capas</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="flujo-de-trabajo-conocimientos-basicos.html"><a href="flujo-de-trabajo-conocimientos-basicos.html"><i class="fa fa-check"></i><b>4</b> Flujo de trabajo: conocimientos básicos</a><ul>
<li class="chapter" data-level="4.1" data-path="flujo-de-trabajo-conocimientos-basicos.html"><a href="flujo-de-trabajo-conocimientos-basicos.html#conocimientos-basicos-de-programacion"><i class="fa fa-check"></i><b>4.1</b> Conocimientos básicos de programación</a></li>
<li class="chapter" data-level="4.2" data-path="flujo-de-trabajo-conocimientos-basicos.html"><a href="flujo-de-trabajo-conocimientos-basicos.html#la-importancia-de-los-nombres"><i class="fa fa-check"></i><b>4.2</b> La importancia de los nombres</a></li>
<li class="chapter" data-level="4.3" data-path="flujo-de-trabajo-conocimientos-basicos.html"><a href="flujo-de-trabajo-conocimientos-basicos.html#usando-funciones"><i class="fa fa-check"></i><b>4.3</b> Usando funciones</a></li>
<li class="chapter" data-level="4.4" data-path="flujo-de-trabajo-conocimientos-basicos.html"><a href="flujo-de-trabajo-conocimientos-basicos.html#practica"><i class="fa fa-check"></i><b>4.4</b> Práctica</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="transform.html"><a href="transform.html"><i class="fa fa-check"></i><b>5</b> Transformación de datos</a><ul>
<li class="chapter" data-level="5.1" data-path="transform.html"><a href="transform.html#introduccion-2"><i class="fa fa-check"></i><b>5.1</b> Introducción</a><ul>
<li class="chapter" data-level="5.1.1" data-path="transform.html"><a href="transform.html#prerequisitos"><i class="fa fa-check"></i><b>5.1.1</b> Prerequisitos</a></li>
<li class="chapter" data-level="5.1.2" data-path="transform.html"><a href="transform.html#vuelos"><i class="fa fa-check"></i><b>5.1.2</b> vuelos</a></li>
<li class="chapter" data-level="5.1.3" data-path="transform.html"><a href="transform.html#lo-basico-de-dplyr"><i class="fa fa-check"></i><b>5.1.3</b> Lo básico de <strong>dplyr</strong></a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="transform.html"><a href="transform.html#filtrar-filas-con-filter"><i class="fa fa-check"></i><b>5.2</b> Filtrar filas con <code>filter()</code></a><ul>
<li class="chapter" data-level="5.2.1" data-path="transform.html"><a href="transform.html#comparaciones"><i class="fa fa-check"></i><b>5.2.1</b> Comparaciones</a></li>
<li class="chapter" data-level="5.2.2" data-path="transform.html"><a href="transform.html#operadores-logicos"><i class="fa fa-check"></i><b>5.2.2</b> Operadores lógicos</a></li>
<li class="chapter" data-level="5.2.3" data-path="transform.html"><a href="transform.html#valores-faltantes"><i class="fa fa-check"></i><b>5.2.3</b> Valores faltantes</a></li>
<li class="chapter" data-level="5.2.4" data-path="transform.html"><a href="transform.html#ejercicios-7"><i class="fa fa-check"></i><b>5.2.4</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="transform.html"><a href="transform.html#reordenar-las-filas-con-arrange"><i class="fa fa-check"></i><b>5.3</b> Reordenar las filas con <code>arrange()</code></a><ul>
<li class="chapter" data-level="5.3.1" data-path="transform.html"><a href="transform.html#ejercicios-8"><i class="fa fa-check"></i><b>5.3.1</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="transform.html"><a href="transform.html#select"><i class="fa fa-check"></i><b>5.4</b> Seleccionar columnas con <code>select()</code></a><ul>
<li class="chapter" data-level="5.4.1" data-path="transform.html"><a href="transform.html#ejercicios-9"><i class="fa fa-check"></i><b>5.4.1</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="transform.html"><a href="transform.html#anadir-nuevas-variables-con-mutate"><i class="fa fa-check"></i><b>5.5</b> Añadir nuevas variables con <code>mutate()</code></a><ul>
<li class="chapter" data-level="5.5.1" data-path="transform.html"><a href="transform.html#mutate-funs"><i class="fa fa-check"></i><b>5.5.1</b> Funciones de creación útiles</a></li>
<li class="chapter" data-level="5.5.2" data-path="transform.html"><a href="transform.html#ejercicios-10"><i class="fa fa-check"></i><b>5.5.2</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="transform.html"><a href="transform.html#resumenes-agrupados-con-summarise"><i class="fa fa-check"></i><b>5.6</b> Resúmenes agrupados con <code>summarise()</code></a><ul>
<li class="chapter" data-level="5.6.1" data-path="transform.html"><a href="transform.html#combinacion-de-multiples-operaciones-con-el-pipe"><i class="fa fa-check"></i><b>5.6.1</b> Combinación de múltiples operaciones con el <em>pipe</em></a></li>
<li class="chapter" data-level="5.6.2" data-path="transform.html"><a href="transform.html#valores-faltantes-1"><i class="fa fa-check"></i><b>5.6.2</b> Valores faltantes</a></li>
<li class="chapter" data-level="5.6.3" data-path="transform.html"><a href="transform.html#conteos"><i class="fa fa-check"></i><b>5.6.3</b> Conteos</a></li>
<li class="chapter" data-level="5.6.4" data-path="transform.html"><a href="transform.html#summarise-funs"><i class="fa fa-check"></i><b>5.6.4</b> Funciones de resumen útiles</a></li>
<li class="chapter" data-level="5.6.5" data-path="transform.html"><a href="transform.html#agrupacion-por-multiples-variables"><i class="fa fa-check"></i><b>5.6.5</b> Agrupación por múltiples variables</a></li>
<li class="chapter" data-level="5.6.6" data-path="transform.html"><a href="transform.html#desagrupar"><i class="fa fa-check"></i><b>5.6.6</b> Desagrupar</a></li>
<li class="chapter" data-level="5.6.7" data-path="transform.html"><a href="transform.html#ejercicios-11"><i class="fa fa-check"></i><b>5.6.7</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="transform.html"><a href="transform.html#transformaciones-agrupadas-y-filtros"><i class="fa fa-check"></i><b>5.7</b> Transformaciones agrupadas (y filtros)</a><ul>
<li class="chapter" data-level="5.7.1" data-path="transform.html"><a href="transform.html#ejercicios-12"><i class="fa fa-check"></i><b>5.7.1</b> Ejercicios</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="flujo-de-trabajo-scripts.html"><a href="flujo-de-trabajo-scripts.html"><i class="fa fa-check"></i><b>6</b> Flujo de trabajo: <em>Scripts</em></a><ul>
<li class="chapter" data-level="6.1" data-path="flujo-de-trabajo-scripts.html"><a href="flujo-de-trabajo-scripts.html#ejecutando-codigo"><i class="fa fa-check"></i><b>6.1</b> Ejecutando código</a></li>
<li class="chapter" data-level="6.2" data-path="flujo-de-trabajo-scripts.html"><a href="flujo-de-trabajo-scripts.html#diagnosticos-de-rstudio"><i class="fa fa-check"></i><b>6.2</b> Diagnósticos de RStudio</a></li>
<li class="chapter" data-level="6.3" data-path="flujo-de-trabajo-scripts.html"><a href="flujo-de-trabajo-scripts.html#practica-1"><i class="fa fa-check"></i><b>6.3</b> Práctica</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="analisis-exploratorio-de-datos-eda.html"><a href="analisis-exploratorio-de-datos-eda.html"><i class="fa fa-check"></i><b>7</b> Análisis exploratorio de datos (<em>EDA</em>)</a><ul>
<li class="chapter" data-level="7.1" data-path="analisis-exploratorio-de-datos-eda.html"><a href="analisis-exploratorio-de-datos-eda.html#introduccion-3"><i class="fa fa-check"></i><b>7.1</b> Introducción</a><ul>
<li class="chapter" data-level="7.1.1" data-path="analisis-exploratorio-de-datos-eda.html"><a href="analisis-exploratorio-de-datos-eda.html#requisitos-indispensables"><i class="fa fa-check"></i><b>7.1.1</b> Requisitos indispensables</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="analisis-exploratorio-de-datos-eda.html"><a href="analisis-exploratorio-de-datos-eda.html#preguntas"><i class="fa fa-check"></i><b>7.2</b> Preguntas</a></li>
<li class="chapter" data-level="7.3" data-path="analisis-exploratorio-de-datos-eda.html"><a href="analisis-exploratorio-de-datos-eda.html#variacion"><i class="fa fa-check"></i><b>7.3</b> Variación</a><ul>
<li class="chapter" data-level="7.3.1" data-path="analisis-exploratorio-de-datos-eda.html"><a href="analisis-exploratorio-de-datos-eda.html#visualizando-distribuciones"><i class="fa fa-check"></i><b>7.3.1</b> Visualizando distribuciones</a></li>
<li class="chapter" data-level="7.3.2" data-path="analisis-exploratorio-de-datos-eda.html"><a href="analisis-exploratorio-de-datos-eda.html#valores-tipicos"><i class="fa fa-check"></i><b>7.3.2</b> Valores típicos</a></li>
<li class="chapter" data-level="7.3.3" data-path="analisis-exploratorio-de-datos-eda.html"><a href="analisis-exploratorio-de-datos-eda.html#valores-inusuales"><i class="fa fa-check"></i><b>7.3.3</b> Valores inusuales</a></li>
<li class="chapter" data-level="7.3.4" data-path="analisis-exploratorio-de-datos-eda.html"><a href="analisis-exploratorio-de-datos-eda.html#ejercicios-13"><i class="fa fa-check"></i><b>7.3.4</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="analisis-exploratorio-de-datos-eda.html"><a href="analisis-exploratorio-de-datos-eda.html#valores-faltantes-2"><i class="fa fa-check"></i><b>7.4</b> Valores faltantes</a><ul>
<li class="chapter" data-level="7.4.1" data-path="analisis-exploratorio-de-datos-eda.html"><a href="analisis-exploratorio-de-datos-eda.html#ejercicios-14"><i class="fa fa-check"></i><b>7.4.1</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="analisis-exploratorio-de-datos-eda.html"><a href="analisis-exploratorio-de-datos-eda.html#covariacion"><i class="fa fa-check"></i><b>7.5</b> Covariación</a><ul>
<li class="chapter" data-level="7.5.1" data-path="analisis-exploratorio-de-datos-eda.html"><a href="analisis-exploratorio-de-datos-eda.html#cat-cont"><i class="fa fa-check"></i><b>7.5.1</b> Una variable discreta y una variable continua</a></li>
<li class="chapter" data-level="7.5.2" data-path="analisis-exploratorio-de-datos-eda.html"><a href="analisis-exploratorio-de-datos-eda.html#dos-variables-discretas"><i class="fa fa-check"></i><b>7.5.2</b> Dos variables discretas</a></li>
<li class="chapter" data-level="7.5.3" data-path="analisis-exploratorio-de-datos-eda.html"><a href="analisis-exploratorio-de-datos-eda.html#dos-variables-continuas"><i class="fa fa-check"></i><b>7.5.3</b> Dos variables continuas</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="analisis-exploratorio-de-datos-eda.html"><a href="analisis-exploratorio-de-datos-eda.html#patrones-y-modelos"><i class="fa fa-check"></i><b>7.6</b> Patrones y modelos</a></li>
<li class="chapter" data-level="7.7" data-path="analisis-exploratorio-de-datos-eda.html"><a href="analisis-exploratorio-de-datos-eda.html#argumentos-en-ggplot2"><i class="fa fa-check"></i><b>7.7</b> Argumentos en ggplot2</a></li>
<li class="chapter" data-level="7.8" data-path="analisis-exploratorio-de-datos-eda.html"><a href="analisis-exploratorio-de-datos-eda.html#aprendiendo-mas"><i class="fa fa-check"></i><b>7.8</b> Aprendiendo más</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="flujo-de-trabajo-proyectos.html"><a href="flujo-de-trabajo-proyectos.html"><i class="fa fa-check"></i><b>8</b> Flujo de trabajo: proyectos</a><ul>
<li class="chapter" data-level="8.1" data-path="flujo-de-trabajo-proyectos.html"><a href="flujo-de-trabajo-proyectos.html#que-es-real"><i class="fa fa-check"></i><b>8.1</b> ¿Qué es real?</a></li>
<li class="chapter" data-level="8.2" data-path="flujo-de-trabajo-proyectos.html"><a href="flujo-de-trabajo-proyectos.html#donde-vive-tu-analisis"><i class="fa fa-check"></i><b>8.2</b> ¿Dónde vive tu análisis?</a></li>
<li class="chapter" data-level="8.3" data-path="flujo-de-trabajo-proyectos.html"><a href="flujo-de-trabajo-proyectos.html#rutas-y-directorios"><i class="fa fa-check"></i><b>8.3</b> Rutas y directorios</a></li>
<li class="chapter" data-level="8.4" data-path="flujo-de-trabajo-proyectos.html"><a href="flujo-de-trabajo-proyectos.html#proyectos-en-rstudio"><i class="fa fa-check"></i><b>8.4</b> Proyectos en RStudio</a></li>
<li class="chapter" data-level="8.5" data-path="flujo-de-trabajo-proyectos.html"><a href="flujo-de-trabajo-proyectos.html#resumen"><i class="fa fa-check"></i><b>8.5</b> Resumen</a></li>
</ul></li>
<li class="part"><span><b>II Manejar o domar datos</b></span></li>
<li class="chapter" data-level="9" data-path="domardatos-intro.html"><a href="domardatos-intro.html"><i class="fa fa-check"></i><b>9</b> Introducción</a></li>
<li class="chapter" data-level="10" data-path="tibbles.html"><a href="tibbles.html"><i class="fa fa-check"></i><b>10</b> Tibbles</a><ul>
<li class="chapter" data-level="10.1" data-path="tibbles.html"><a href="tibbles.html#introduccion-4"><i class="fa fa-check"></i><b>10.1</b> Introducción</a><ul>
<li class="chapter" data-level="10.1.1" data-path="tibbles.html"><a href="tibbles.html#requisitos"><i class="fa fa-check"></i><b>10.1.1</b> Requisitos</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="tibbles.html"><a href="tibbles.html#creando-tibbles"><i class="fa fa-check"></i><b>10.2</b> Creando tibbles</a></li>
<li class="chapter" data-level="10.3" data-path="tibbles.html"><a href="tibbles.html#tibbles-vs.data.frame"><i class="fa fa-check"></i><b>10.3</b> Tibbles vs. data.frame</a><ul>
<li class="chapter" data-level="10.3.1" data-path="tibbles.html"><a href="tibbles.html#impresion-en-la-consola"><i class="fa fa-check"></i><b>10.3.1</b> Impresión en la consola</a></li>
<li class="chapter" data-level="10.3.2" data-path="tibbles.html"><a href="tibbles.html#seleccion-de-subconjuntos"><i class="fa fa-check"></i><b>10.3.2</b> Selección de subconjuntos</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="tibbles.html"><a href="tibbles.html#interactuando-con-codigo-antiguo"><i class="fa fa-check"></i><b>10.4</b> Interactuando con código antiguo</a></li>
<li class="chapter" data-level="10.5" data-path="tibbles.html"><a href="tibbles.html#ejercicios-18"><i class="fa fa-check"></i><b>10.5</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="importacion-de-datos.html"><a href="importacion-de-datos.html"><i class="fa fa-check"></i><b>11</b> Importación de datos</a><ul>
<li class="chapter" data-level="11.1" data-path="importacion-de-datos.html"><a href="importacion-de-datos.html#introduccion-5"><i class="fa fa-check"></i><b>11.1</b> Introducción</a><ul>
<li class="chapter" data-level="11.1.1" data-path="importacion-de-datos.html"><a href="importacion-de-datos.html#prerrequisitos-2"><i class="fa fa-check"></i><b>11.1.1</b> Prerrequisitos</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="importacion-de-datos.html"><a href="importacion-de-datos.html#comenzando"><i class="fa fa-check"></i><b>11.2</b> Comenzando</a><ul>
<li class="chapter" data-level="11.2.1" data-path="importacion-de-datos.html"><a href="importacion-de-datos.html#comparacion-con-r-base"><i class="fa fa-check"></i><b>11.2.1</b> Comparación con R base</a></li>
<li class="chapter" data-level="11.2.2" data-path="importacion-de-datos.html"><a href="importacion-de-datos.html#ejercicios-19"><i class="fa fa-check"></i><b>11.2.2</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="importacion-de-datos.html"><a href="importacion-de-datos.html#segmentar-un-vector"><i class="fa fa-check"></i><b>11.3</b> Segmentar un vector</a><ul>
<li class="chapter" data-level="11.3.1" data-path="importacion-de-datos.html"><a href="importacion-de-datos.html#numeros"><i class="fa fa-check"></i><b>11.3.1</b> Números</a></li>
<li class="chapter" data-level="11.3.2" data-path="importacion-de-datos.html"><a href="importacion-de-datos.html#readr-strings"><i class="fa fa-check"></i><b>11.3.2</b> Cadenas de texto (<em>strings</em>)</a></li>
<li class="chapter" data-level="11.3.3" data-path="importacion-de-datos.html"><a href="importacion-de-datos.html#readr-factors"><i class="fa fa-check"></i><b>11.3.3</b> Factores</a></li>
<li class="chapter" data-level="11.3.4" data-path="importacion-de-datos.html"><a href="importacion-de-datos.html#readr-datetimes"><i class="fa fa-check"></i><b>11.3.4</b> Fechas, fechas-horas, y horas</a></li>
<li class="chapter" data-level="11.3.5" data-path="importacion-de-datos.html"><a href="importacion-de-datos.html#ejercicios-20"><i class="fa fa-check"></i><b>11.3.5</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="importacion-de-datos.html"><a href="importacion-de-datos.html#segmentar-un-archivo"><i class="fa fa-check"></i><b>11.4</b> Segmentar un archivo</a><ul>
<li class="chapter" data-level="11.4.1" data-path="importacion-de-datos.html"><a href="importacion-de-datos.html#estrategia"><i class="fa fa-check"></i><b>11.4.1</b> Estrategia</a></li>
<li class="chapter" data-level="11.4.2" data-path="importacion-de-datos.html"><a href="importacion-de-datos.html#problemas"><i class="fa fa-check"></i><b>11.4.2</b> Problemas</a></li>
<li class="chapter" data-level="11.4.3" data-path="importacion-de-datos.html"><a href="importacion-de-datos.html#otras-estrategias"><i class="fa fa-check"></i><b>11.4.3</b> Otras estrategias</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="importacion-de-datos.html"><a href="importacion-de-datos.html#escribir-a-un-archivo"><i class="fa fa-check"></i><b>11.5</b> Escribir a un archivo</a></li>
<li class="chapter" data-level="11.6" data-path="importacion-de-datos.html"><a href="importacion-de-datos.html#otros-tipos-de-datos"><i class="fa fa-check"></i><b>11.6</b> Otros tipos de datos</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="datos-ordenados.html"><a href="datos-ordenados.html"><i class="fa fa-check"></i><b>12</b> Datos ordenados</a><ul>
<li class="chapter" data-level="12.1" data-path="datos-ordenados.html"><a href="datos-ordenados.html#introduccion-6"><i class="fa fa-check"></i><b>12.1</b> Introducción</a><ul>
<li class="chapter" data-level="12.1.1" data-path="datos-ordenados.html"><a href="datos-ordenados.html#prerrequisitos-3"><i class="fa fa-check"></i><b>12.1.1</b> Prerrequisitos</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="datos-ordenados.html"><a href="datos-ordenados.html#datos-ordenados-1"><i class="fa fa-check"></i><b>12.2</b> Datos ordenados</a><ul>
<li class="chapter" data-level="12.2.1" data-path="datos-ordenados.html"><a href="datos-ordenados.html#ejercicios-21"><i class="fa fa-check"></i><b>12.2.1</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="datos-ordenados.html"><a href="datos-ordenados.html#esparcir-y-reunir"><i class="fa fa-check"></i><b>12.3</b> Esparcir y reunir</a><ul>
<li class="chapter" data-level="12.3.1" data-path="datos-ordenados.html"><a href="datos-ordenados.html#gather"><i class="fa fa-check"></i><b>12.3.1</b> Gather</a></li>
<li class="chapter" data-level="12.3.2" data-path="datos-ordenados.html"><a href="datos-ordenados.html#spread"><i class="fa fa-check"></i><b>12.3.2</b> Spread</a></li>
<li class="chapter" data-level="12.3.3" data-path="datos-ordenados.html"><a href="datos-ordenados.html#ejercicios-22"><i class="fa fa-check"></i><b>12.3.3</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="datos-ordenados.html"><a href="datos-ordenados.html#separar-y-unir"><i class="fa fa-check"></i><b>12.4</b> Separar y unir</a><ul>
<li class="chapter" data-level="12.4.1" data-path="datos-ordenados.html"><a href="datos-ordenados.html#separar"><i class="fa fa-check"></i><b>12.4.1</b> Separar</a></li>
<li class="chapter" data-level="12.4.2" data-path="datos-ordenados.html"><a href="datos-ordenados.html#unir"><i class="fa fa-check"></i><b>12.4.2</b> Unir</a></li>
<li class="chapter" data-level="12.4.3" data-path="datos-ordenados.html"><a href="datos-ordenados.html#ejercicios-23"><i class="fa fa-check"></i><b>12.4.3</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="datos-ordenados.html"><a href="datos-ordenados.html#valores-faltantes-3"><i class="fa fa-check"></i><b>12.5</b> Valores faltantes</a><ul>
<li class="chapter" data-level="12.5.1" data-path="datos-ordenados.html"><a href="datos-ordenados.html#ejercicios-24"><i class="fa fa-check"></i><b>12.5.1</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="12.6" data-path="datos-ordenados.html"><a href="datos-ordenados.html#estudio-de-caso"><i class="fa fa-check"></i><b>12.6</b> Estudio de caso</a><ul>
<li class="chapter" data-level="12.6.1" data-path="datos-ordenados.html"><a href="datos-ordenados.html#ejercicios-25"><i class="fa fa-check"></i><b>12.6.1</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="12.7" data-path="datos-ordenados.html"><a href="datos-ordenados.html#datos-no-ordenados"><i class="fa fa-check"></i><b>12.7</b> Datos no ordenados</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="datos-relacionales.html"><a href="datos-relacionales.html"><i class="fa fa-check"></i><b>13</b> Datos relacionales</a><ul>
<li class="chapter" data-level="13.1" data-path="datos-relacionales.html"><a href="datos-relacionales.html#introduccion-7"><i class="fa fa-check"></i><b>13.1</b> Introducción</a><ul>
<li class="chapter" data-level="13.1.1" data-path="datos-relacionales.html"><a href="datos-relacionales.html#prerrequisitos-4"><i class="fa fa-check"></i><b>13.1.1</b> Prerrequisitos</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="datos-relacionales.html"><a href="datos-relacionales.html#nycflights13-relational"><i class="fa fa-check"></i><b>13.2</b> datos sobre vuelos</a><ul>
<li class="chapter" data-level="13.2.1" data-path="datos-relacionales.html"><a href="datos-relacionales.html#ejercicios-26"><i class="fa fa-check"></i><b>13.2.1</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="datos-relacionales.html"><a href="datos-relacionales.html#claves"><i class="fa fa-check"></i><b>13.3</b> Claves</a><ul>
<li class="chapter" data-level="13.3.1" data-path="datos-relacionales.html"><a href="datos-relacionales.html#ejercicios-27"><i class="fa fa-check"></i><b>13.3.1</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="datos-relacionales.html"><a href="datos-relacionales.html#mutating-joins"><i class="fa fa-check"></i><b>13.4</b> Uniones de transformación</a><ul>
<li class="chapter" data-level="13.4.1" data-path="datos-relacionales.html"><a href="datos-relacionales.html#entendiendo-las-uniones"><i class="fa fa-check"></i><b>13.4.1</b> Entendiendo las uniones</a></li>
<li class="chapter" data-level="13.4.2" data-path="datos-relacionales.html"><a href="datos-relacionales.html#inner-join"><i class="fa fa-check"></i><b>13.4.2</b> Unión interior</a></li>
<li class="chapter" data-level="13.4.3" data-path="datos-relacionales.html"><a href="datos-relacionales.html#outer-join"><i class="fa fa-check"></i><b>13.4.3</b> Uniones exteriores</a></li>
<li class="chapter" data-level="13.4.4" data-path="datos-relacionales.html"><a href="datos-relacionales.html#join-matches"><i class="fa fa-check"></i><b>13.4.4</b> Claves duplicadas</a></li>
<li class="chapter" data-level="13.4.5" data-path="datos-relacionales.html"><a href="datos-relacionales.html#join-by"><i class="fa fa-check"></i><b>13.4.5</b> Definiendo las columnas clave</a></li>
<li class="chapter" data-level="13.4.6" data-path="datos-relacionales.html"><a href="datos-relacionales.html#ejercicios-28"><i class="fa fa-check"></i><b>13.4.6</b> Ejercicios</a></li>
<li class="chapter" data-level="13.4.7" data-path="datos-relacionales.html"><a href="datos-relacionales.html#otras-implementaciones"><i class="fa fa-check"></i><b>13.4.7</b> Otras implementaciones</a></li>
</ul></li>
<li class="chapter" data-level="13.5" data-path="datos-relacionales.html"><a href="datos-relacionales.html#filtering-joins"><i class="fa fa-check"></i><b>13.5</b> Uniones de filtro</a><ul>
<li class="chapter" data-level="13.5.1" data-path="datos-relacionales.html"><a href="datos-relacionales.html#ejercicios-29"><i class="fa fa-check"></i><b>13.5.1</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="13.6" data-path="datos-relacionales.html"><a href="datos-relacionales.html#problemas-con-las-uniones"><i class="fa fa-check"></i><b>13.6</b> Problemas con las uniones</a></li>
<li class="chapter" data-level="13.7" data-path="datos-relacionales.html"><a href="datos-relacionales.html#set-operations"><i class="fa fa-check"></i><b>13.7</b> Operaciones de conjuntos</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html"><i class="fa fa-check"></i><b>14</b> Cadenas de caracteres</a><ul>
<li class="chapter" data-level="14.1" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#introduccion-8"><i class="fa fa-check"></i><b>14.1</b> Introducción</a><ul>
<li class="chapter" data-level="14.1.1" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#prerequisitos-1"><i class="fa fa-check"></i><b>14.1.1</b> Prerequisitos</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#cadenas-elementos-basicos"><i class="fa fa-check"></i><b>14.2</b> Cadenas: elementos básicos</a><ul>
<li class="chapter" data-level="14.2.1" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#largo-de-cadena"><i class="fa fa-check"></i><b>14.2.1</b> Largo de cadena</a></li>
<li class="chapter" data-level="14.2.2" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#combinar-cadenas"><i class="fa fa-check"></i><b>14.2.2</b> Combinar cadenas</a></li>
<li class="chapter" data-level="14.2.3" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#dividir-cadenas"><i class="fa fa-check"></i><b>14.2.3</b> Dividir cadenas</a></li>
<li class="chapter" data-level="14.2.4" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#locales"><i class="fa fa-check"></i><b>14.2.4</b> <em>Locales</em></a></li>
<li class="chapter" data-level="14.2.5" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#ejercicios-30"><i class="fa fa-check"></i><b>14.2.5</b> Ejercicios</a></li>
<li class="chapter" data-level="14.2.6" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#buscar-coincidencia-de-patrones-con-expresiones-regulares"><i class="fa fa-check"></i><b>14.2.6</b> Buscar coincidencia de patrones con expresiones regulares</a></li>
<li class="chapter" data-level="14.2.7" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#coincidencias-basicas"><i class="fa fa-check"></i><b>14.2.7</b> Coincidencias básicas</a></li>
<li class="chapter" data-level="14.2.8" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#anclas"><i class="fa fa-check"></i><b>14.2.8</b> Anclas</a></li>
<li class="chapter" data-level="14.2.9" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#clases-de-caracteres-y-alternativas"><i class="fa fa-check"></i><b>14.2.9</b> Clases de caracteres y alternativas</a></li>
<li class="chapter" data-level="14.2.10" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#repeticion"><i class="fa fa-check"></i><b>14.2.10</b> Repetición</a></li>
<li class="chapter" data-level="14.2.11" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#agrupamiento-y-referencias-previas"><i class="fa fa-check"></i><b>14.2.11</b> Agrupamiento y referencias previas</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#herramientas"><i class="fa fa-check"></i><b>14.3</b> Herramientas</a><ul>
<li class="chapter" data-level="14.3.1" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#detectar-coincidencias"><i class="fa fa-check"></i><b>14.3.1</b> Detectar coincidencias</a></li>
<li class="chapter" data-level="14.3.2" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#ejercicios-36"><i class="fa fa-check"></i><b>14.3.2</b> Ejercicios</a></li>
<li class="chapter" data-level="14.3.3" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#extraer-coincidencias"><i class="fa fa-check"></i><b>14.3.3</b> Extraer coincidencias</a></li>
<li class="chapter" data-level="14.3.4" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#coincidencias-agrupadas"><i class="fa fa-check"></i><b>14.3.4</b> Coincidencias agrupadas</a></li>
<li class="chapter" data-level="14.3.5" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#remplazar-coincidencias"><i class="fa fa-check"></i><b>14.3.5</b> Remplazar coincidencias</a></li>
<li class="chapter" data-level="14.3.6" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#divisiones"><i class="fa fa-check"></i><b>14.3.6</b> Divisiones</a></li>
<li class="chapter" data-level="14.3.7" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#buscar-coincidencias"><i class="fa fa-check"></i><b>14.3.7</b> Buscar coincidencias</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#otro-tipo-de-patrones"><i class="fa fa-check"></i><b>14.4</b> Otro tipo de patrones</a><ul>
<li class="chapter" data-level="14.4.1" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#ejercicios-41"><i class="fa fa-check"></i><b>14.4.1</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="14.5" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#otros-usos-de-las-expresiones-regulares."><i class="fa fa-check"></i><b>14.5</b> Otros usos de las expresiones regulares.</a></li>
<li class="chapter" data-level="14.6" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#stringi"><i class="fa fa-check"></i><b>14.6</b> stringi</a><ul>
<li class="chapter" data-level="14.6.1" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#ejercicios-42"><i class="fa fa-check"></i><b>14.6.1</b> Ejercicios</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="factores.html"><a href="factores.html"><i class="fa fa-check"></i><b>15</b> Factores</a><ul>
<li class="chapter" data-level="15.1" data-path="factores.html"><a href="factores.html#introduccion-9"><i class="fa fa-check"></i><b>15.1</b> Introducción</a><ul>
<li class="chapter" data-level="15.1.1" data-path="factores.html"><a href="factores.html#prerrequisitos-5"><i class="fa fa-check"></i><b>15.1.1</b> Prerrequisitos</a></li>
<li class="chapter" data-level="15.1.2" data-path="factores.html"><a href="factores.html#aprendiendo-mas-1"><i class="fa fa-check"></i><b>15.1.2</b> Aprendiendo más</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="factores.html"><a href="factores.html#creando-factores"><i class="fa fa-check"></i><b>15.2</b> Creando factores</a></li>
<li class="chapter" data-level="15.3" data-path="factores.html"><a href="factores.html#encuesta-social-general"><i class="fa fa-check"></i><b>15.3</b> Encuesta Social General</a><ul>
<li class="chapter" data-level="15.3.1" data-path="factores.html"><a href="factores.html#ejercicios-43"><i class="fa fa-check"></i><b>15.3.1</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="15.4" data-path="factores.html"><a href="factores.html#modificar-el-orden-de-los-factores"><i class="fa fa-check"></i><b>15.4</b> Modificar el orden de los factores</a><ul>
<li class="chapter" data-level="15.4.1" data-path="factores.html"><a href="factores.html#ejercicios-44"><i class="fa fa-check"></i><b>15.4.1</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="15.5" data-path="factores.html"><a href="factores.html#modificar-los-niveles-de-los-factores"><i class="fa fa-check"></i><b>15.5</b> Modificar los niveles de los factores</a><ul>
<li class="chapter" data-level="15.5.1" data-path="factores.html"><a href="factores.html#ejercicios-45"><i class="fa fa-check"></i><b>15.5.1</b> Ejercicios</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="16" data-path="fechas-y-horas.html"><a href="fechas-y-horas.html"><i class="fa fa-check"></i><b>16</b> Fechas y horas</a><ul>
<li class="chapter" data-level="16.1" data-path="fechas-y-horas.html"><a href="fechas-y-horas.html#introduccion-10"><i class="fa fa-check"></i><b>16.1</b> Introducción</a><ul>
<li class="chapter" data-level="16.1.1" data-path="fechas-y-horas.html"><a href="fechas-y-horas.html#requisitos-previos"><i class="fa fa-check"></i><b>16.1.1</b> Requisitos previos</a></li>
</ul></li>
<li class="chapter" data-level="16.2" data-path="fechas-y-horas.html"><a href="fechas-y-horas.html#creando-fechashoras"><i class="fa fa-check"></i><b>16.2</b> Creando fechas/horas</a><ul>
<li class="chapter" data-level="16.2.1" data-path="fechas-y-horas.html"><a href="fechas-y-horas.html#desde-cadenas-de-caracteres"><i class="fa fa-check"></i><b>16.2.1</b> Desde cadenas de caracteres</a></li>
<li class="chapter" data-level="16.2.2" data-path="fechas-y-horas.html"><a href="fechas-y-horas.html#desde-componentes-individuales"><i class="fa fa-check"></i><b>16.2.2</b> Desde componentes individuales</a></li>
<li class="chapter" data-level="16.2.3" data-path="fechas-y-horas.html"><a href="fechas-y-horas.html#desde-otros-tipos"><i class="fa fa-check"></i><b>16.2.3</b> Desde otros tipos</a></li>
<li class="chapter" data-level="16.2.4" data-path="fechas-y-horas.html"><a href="fechas-y-horas.html#ejercicios-46"><i class="fa fa-check"></i><b>16.2.4</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="16.3" data-path="fechas-y-horas.html"><a href="fechas-y-horas.html#componentes-de-fecha-hora"><i class="fa fa-check"></i><b>16.3</b> Componentes de fecha-hora</a><ul>
<li class="chapter" data-level="16.3.1" data-path="fechas-y-horas.html"><a href="fechas-y-horas.html#obteniendo-los-componentes"><i class="fa fa-check"></i><b>16.3.1</b> Obteniendo los componentes</a></li>
<li class="chapter" data-level="16.3.2" data-path="fechas-y-horas.html"><a href="fechas-y-horas.html#redondeo"><i class="fa fa-check"></i><b>16.3.2</b> Redondeo</a></li>
<li class="chapter" data-level="16.3.3" data-path="fechas-y-horas.html"><a href="fechas-y-horas.html#configurando-componentes"><i class="fa fa-check"></i><b>16.3.3</b> Configurando componentes</a></li>
<li class="chapter" data-level="16.3.4" data-path="fechas-y-horas.html"><a href="fechas-y-horas.html#ejercicios-47"><i class="fa fa-check"></i><b>16.3.4</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="16.4" data-path="fechas-y-horas.html"><a href="fechas-y-horas.html#lapsos-de-tiempo"><i class="fa fa-check"></i><b>16.4</b> Lapsos de tiempo</a><ul>
<li class="chapter" data-level="16.4.1" data-path="fechas-y-horas.html"><a href="fechas-y-horas.html#duraciones"><i class="fa fa-check"></i><b>16.4.1</b> Duraciones</a></li>
<li class="chapter" data-level="16.4.2" data-path="fechas-y-horas.html"><a href="fechas-y-horas.html#periodos"><i class="fa fa-check"></i><b>16.4.2</b> Períodos</a></li>
<li class="chapter" data-level="16.4.3" data-path="fechas-y-horas.html"><a href="fechas-y-horas.html#intervalos"><i class="fa fa-check"></i><b>16.4.3</b> Intervalos</a></li>
<li class="chapter" data-level="16.4.4" data-path="fechas-y-horas.html"><a href="fechas-y-horas.html#resumen-1"><i class="fa fa-check"></i><b>16.4.4</b> Resumen</a></li>
<li class="chapter" data-level="16.4.5" data-path="fechas-y-horas.html"><a href="fechas-y-horas.html#ejercicios-48"><i class="fa fa-check"></i><b>16.4.5</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="16.5" data-path="fechas-y-horas.html"><a href="fechas-y-horas.html#husos-horarios"><i class="fa fa-check"></i><b>16.5</b> Husos horarios</a></li>
</ul></li>
<li class="part"><span><b>III Programar</b></span></li>
<li class="chapter" data-level="17" data-path="programar-intro.html"><a href="programar-intro.html"><i class="fa fa-check"></i><b>17</b> Introducción</a><ul>
<li class="chapter" data-level="17.1" data-path="programar-intro.html"><a href="programar-intro.html#aprendiendo-mas-2"><i class="fa fa-check"></i><b>17.1</b> Aprendiendo más</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="pipes.html"><a href="pipes.html"><i class="fa fa-check"></i><b>18</b> Pipes</a><ul>
<li class="chapter" data-level="18.1" data-path="pipes.html"><a href="pipes.html#introduccion-11"><i class="fa fa-check"></i><b>18.1</b> Introducción</a><ul>
<li class="chapter" data-level="18.1.1" data-path="pipes.html"><a href="pipes.html#prerequisitos-2"><i class="fa fa-check"></i><b>18.1.1</b> Prerequisitos</a></li>
</ul></li>
<li class="chapter" data-level="18.2" data-path="pipes.html"><a href="pipes.html#alternativas-a-los-pipes"><i class="fa fa-check"></i><b>18.2</b> Alternativas a los pipes</a><ul>
<li class="chapter" data-level="18.2.1" data-path="pipes.html"><a href="pipes.html#pasos-intermedios"><i class="fa fa-check"></i><b>18.2.1</b> Pasos intermedios</a></li>
<li class="chapter" data-level="18.2.2" data-path="pipes.html"><a href="pipes.html#sobreescribir-el-original"><i class="fa fa-check"></i><b>18.2.2</b> Sobreescribir el original</a></li>
<li class="chapter" data-level="18.2.3" data-path="pipes.html"><a href="pipes.html#composicion-de-funciones"><i class="fa fa-check"></i><b>18.2.3</b> Composición de funciones</a></li>
<li class="chapter" data-level="18.2.4" data-path="pipes.html"><a href="pipes.html#uso-de-pipe"><i class="fa fa-check"></i><b>18.2.4</b> Uso de pipe</a></li>
</ul></li>
<li class="chapter" data-level="18.3" data-path="pipes.html"><a href="pipes.html#cuando-no-usar-el-pipe"><i class="fa fa-check"></i><b>18.3</b> Cuándo no usar el pipe</a></li>
<li class="chapter" data-level="18.4" data-path="pipes.html"><a href="pipes.html#otras-herramientas-de-magrittr"><i class="fa fa-check"></i><b>18.4</b> Otras herramientas de magrittr</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="funciones.html"><a href="funciones.html"><i class="fa fa-check"></i><b>19</b> Funciones</a><ul>
<li class="chapter" data-level="19.1" data-path="funciones.html"><a href="funciones.html#introduccion-12"><i class="fa fa-check"></i><b>19.1</b> Introducción</a><ul>
<li class="chapter" data-level="19.1.1" data-path="funciones.html"><a href="funciones.html#prerequisitos-3"><i class="fa fa-check"></i><b>19.1.1</b> Prerequisitos</a></li>
</ul></li>
<li class="chapter" data-level="19.2" data-path="funciones.html"><a href="funciones.html#cuando-deberias-escribir-una-funcion"><i class="fa fa-check"></i><b>19.2</b> ¿Cuándo deberías escribir una función?</a><ul>
<li class="chapter" data-level="19.2.1" data-path="funciones.html"><a href="funciones.html#practica-2"><i class="fa fa-check"></i><b>19.2.1</b> Práctica</a></li>
</ul></li>
<li class="chapter" data-level="19.3" data-path="funciones.html"><a href="funciones.html#las-funciones-son-para-los-humanos-y-las-computadoras"><i class="fa fa-check"></i><b>19.3</b> Las funciones son para los humanos y las computadoras</a><ul>
<li class="chapter" data-level="19.3.1" data-path="funciones.html"><a href="funciones.html#ejercicios-49"><i class="fa fa-check"></i><b>19.3.1</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="19.4" data-path="funciones.html"><a href="funciones.html#ejecucion-condicional"><i class="fa fa-check"></i><b>19.4</b> Ejecución condicional</a><ul>
<li class="chapter" data-level="19.4.1" data-path="funciones.html"><a href="funciones.html#condiciones"><i class="fa fa-check"></i><b>19.4.1</b> Condiciones</a></li>
<li class="chapter" data-level="19.4.2" data-path="funciones.html"><a href="funciones.html#condiciones-multiples"><i class="fa fa-check"></i><b>19.4.2</b> Condiciones múltiples</a></li>
<li class="chapter" data-level="19.4.3" data-path="funciones.html"><a href="funciones.html#estilo-de-codigo"><i class="fa fa-check"></i><b>19.4.3</b> Estilo de código</a></li>
<li class="chapter" data-level="19.4.4" data-path="funciones.html"><a href="funciones.html#ejercicios-50"><i class="fa fa-check"></i><b>19.4.4</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="19.5" data-path="funciones.html"><a href="funciones.html#function-arguments"><i class="fa fa-check"></i><b>19.5</b> Function arguments</a><ul>
<li class="chapter" data-level="19.5.1" data-path="funciones.html"><a href="funciones.html#eleccion-de-nombres"><i class="fa fa-check"></i><b>19.5.1</b> Elección de nombres</a></li>
<li class="chapter" data-level="19.5.2" data-path="funciones.html"><a href="funciones.html#controlando-valores"><i class="fa fa-check"></i><b>19.5.2</b> Controlando valores</a></li>
<li class="chapter" data-level="19.5.3" data-path="funciones.html"><a href="funciones.html#punto-punto-punto"><i class="fa fa-check"></i><b>19.5.3</b> Punto-punto-punto (…)</a></li>
<li class="chapter" data-level="19.5.4" data-path="funciones.html"><a href="funciones.html#evaluacion-diferida"><i class="fa fa-check"></i><b>19.5.4</b> Evaluación diferida</a></li>
<li class="chapter" data-level="19.5.5" data-path="funciones.html"><a href="funciones.html#ejercicios-51"><i class="fa fa-check"></i><b>19.5.5</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="19.6" data-path="funciones.html"><a href="funciones.html#valores-de-salida"><i class="fa fa-check"></i><b>19.6</b> Valores de salida</a><ul>
<li class="chapter" data-level="19.6.1" data-path="funciones.html"><a href="funciones.html#sentencias-explicitas-de-salida"><i class="fa fa-check"></i><b>19.6.1</b> Sentencias explícitas de salida</a></li>
<li class="chapter" data-level="19.6.2" data-path="funciones.html"><a href="funciones.html#escribir-funciones-aptas-para-un-pipe"><i class="fa fa-check"></i><b>19.6.2</b> Escribir funciones aptas para un pipe</a></li>
</ul></li>
<li class="chapter" data-level="19.7" data-path="funciones.html"><a href="funciones.html#entorno"><i class="fa fa-check"></i><b>19.7</b> Entorno</a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="vectores.html"><a href="vectores.html"><i class="fa fa-check"></i><b>20</b> Vectores</a><ul>
<li class="chapter" data-level="20.1" data-path="vectores.html"><a href="vectores.html#introduccion-13"><i class="fa fa-check"></i><b>20.1</b> Introducción</a><ul>
<li class="chapter" data-level="20.1.1" data-path="vectores.html"><a href="vectores.html#pre-requisitos"><i class="fa fa-check"></i><b>20.1.1</b> Pre-requisitos</a></li>
</ul></li>
<li class="chapter" data-level="20.2" data-path="vectores.html"><a href="vectores.html#vectores-basicos"><i class="fa fa-check"></i><b>20.2</b> Vectores básicos</a></li>
<li class="chapter" data-level="20.3" data-path="vectores.html"><a href="vectores.html#tipos-importantes-de-vectores-atomicos"><i class="fa fa-check"></i><b>20.3</b> Tipos importantes de vectores atómicos</a><ul>
<li class="chapter" data-level="20.3.1" data-path="vectores.html"><a href="vectores.html#logico-o-booleano"><i class="fa fa-check"></i><b>20.3.1</b> Lógico o Booleano</a></li>
<li class="chapter" data-level="20.3.2" data-path="vectores.html"><a href="vectores.html#numerico"><i class="fa fa-check"></i><b>20.3.2</b> Numérico</a></li>
<li class="chapter" data-level="20.3.3" data-path="vectores.html"><a href="vectores.html#caracter"><i class="fa fa-check"></i><b>20.3.3</b> Caracter</a></li>
<li class="chapter" data-level="20.3.4" data-path="vectores.html"><a href="vectores.html#valores-perdidos-missing-values"><i class="fa fa-check"></i><b>20.3.4</b> Valores perdidos (Missing values)</a></li>
</ul></li>
<li class="chapter" data-level="20.4" data-path="vectores.html"><a href="vectores.html#usando-vectores-atomicos"><i class="fa fa-check"></i><b>20.4</b> Usando vectores atómicos</a><ul>
<li class="chapter" data-level="20.4.1" data-path="vectores.html"><a href="vectores.html#coercion"><i class="fa fa-check"></i><b>20.4.1</b> Coerción</a></li>
<li class="chapter" data-level="20.4.2" data-path="vectores.html"><a href="vectores.html#funciones-de-test"><i class="fa fa-check"></i><b>20.4.2</b> Funciones de test</a></li>
<li class="chapter" data-level="20.4.3" data-path="vectores.html"><a href="vectores.html#escalares-y-reglas-de-reciclado"><i class="fa fa-check"></i><b>20.4.3</b> Escalares y reglas de reciclado</a></li>
<li class="chapter" data-level="20.4.4" data-path="vectores.html"><a href="vectores.html#nombrando-vectores"><i class="fa fa-check"></i><b>20.4.4</b> Nombrando vectores</a></li>
<li class="chapter" data-level="20.4.5" data-path="vectores.html"><a href="vectores.html#subsetting-subdivision-o-creacion-de-subconjuntos-vector-subsetting-subdivision-de-vectores"><i class="fa fa-check"></i><b>20.4.5</b> Subsetting (Subdivisión o creación de subconjuntos) {#vector-subsetting, subdivisión de vectores}</a></li>
<li class="chapter" data-level="20.4.6" data-path="vectores.html"><a href="vectores.html#ejercicios-52"><i class="fa fa-check"></i><b>20.4.6</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="20.5" data-path="vectores.html"><a href="vectores.html#vectores-recursivos-listas"><i class="fa fa-check"></i><b>20.5</b> Vectores Recursivos (listas)</a><ul>
<li class="chapter" data-level="20.5.1" data-path="vectores.html"><a href="vectores.html#visualizando-listas"><i class="fa fa-check"></i><b>20.5.1</b> Visualizando listas</a></li>
<li class="chapter" data-level="20.5.2" data-path="vectores.html"><a href="vectores.html#listas-de-condimentos"><i class="fa fa-check"></i><b>20.5.2</b> Listas de Condimentos</a></li>
<li class="chapter" data-level="20.5.3" data-path="vectores.html"><a href="vectores.html#ejercicios-53"><i class="fa fa-check"></i><b>20.5.3</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="20.6" data-path="vectores.html"><a href="vectores.html#atributos"><i class="fa fa-check"></i><b>20.6</b> Atributos</a></li>
<li class="chapter" data-level="20.7" data-path="vectores.html"><a href="vectores.html#vectores-aumentados"><i class="fa fa-check"></i><b>20.7</b> Vectores Aumentados</a><ul>
<li class="chapter" data-level="20.7.1" data-path="vectores.html"><a href="vectores.html#dates-and-date-times-fechas-y-fecha-hora"><i class="fa fa-check"></i><b>20.7.1</b> Dates and date-times (Fechas y Fecha – Hora)</a></li>
<li class="chapter" data-level="20.7.2" data-path="vectores.html"><a href="vectores.html#tibbles-1"><i class="fa fa-check"></i><b>20.7.2</b> Tibbles</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="21" data-path="iteracion.html"><a href="iteracion.html"><i class="fa fa-check"></i><b>21</b> Iteración</a><ul>
<li class="chapter" data-level="21.1" data-path="iteracion.html"><a href="iteracion.html#introduccion-14"><i class="fa fa-check"></i><b>21.1</b> Introducción</a><ul>
<li class="chapter" data-level="21.1.1" data-path="iteracion.html"><a href="iteracion.html#pre-requisitos-1"><i class="fa fa-check"></i><b>21.1.1</b> Pre requisitos</a></li>
</ul></li>
<li class="chapter" data-level="21.2" data-path="iteracion.html"><a href="iteracion.html#bucles-for"><i class="fa fa-check"></i><b>21.2</b> Bucles <em>for</em></a><ul>
<li class="chapter" data-level="21.2.1" data-path="iteracion.html"><a href="iteracion.html#ejercicios-54"><i class="fa fa-check"></i><b>21.2.1</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="21.3" data-path="iteracion.html"><a href="iteracion.html#variaciones-de-bucles-for"><i class="fa fa-check"></i><b>21.3</b> Variaciones de bucles <em>for</em></a><ul>
<li class="chapter" data-level="21.3.1" data-path="iteracion.html"><a href="iteracion.html#modificar-un-objeto-existente"><i class="fa fa-check"></i><b>21.3.1</b> Modificar un objeto existente</a></li>
<li class="chapter" data-level="21.3.2" data-path="iteracion.html"><a href="iteracion.html#patrones-de-bucle"><i class="fa fa-check"></i><b>21.3.2</b> Patrones de bucle</a></li>
<li class="chapter" data-level="21.3.3" data-path="iteracion.html"><a href="iteracion.html#longitud-de-output-desconocida"><i class="fa fa-check"></i><b>21.3.3</b> Longitud de <em>output</em> desconocida</a></li>
<li class="chapter" data-level="21.3.4" data-path="iteracion.html"><a href="iteracion.html#longitud-de-secuencia-desconocida"><i class="fa fa-check"></i><b>21.3.4</b> Longitud de secuencia desconocida</a></li>
<li class="chapter" data-level="21.3.5" data-path="iteracion.html"><a href="iteracion.html#ejercicios-55"><i class="fa fa-check"></i><b>21.3.5</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="21.4" data-path="iteracion.html"><a href="iteracion.html#bucles-for-vs.funcionales"><i class="fa fa-check"></i><b>21.4</b> Bucles <em>for</em> vs. funcionales</a><ul>
<li class="chapter" data-level="21.4.1" data-path="iteracion.html"><a href="iteracion.html#ejercicios-56"><i class="fa fa-check"></i><b>21.4.1</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="21.5" data-path="iteracion.html"><a href="iteracion.html#las-funciones-map-mapa-en-ingles"><i class="fa fa-check"></i><b>21.5</b> Las funciones <em>map</em> (mapa en inglés)</a><ul>
<li class="chapter" data-level="21.5.1" data-path="iteracion.html"><a href="iteracion.html#atajos"><i class="fa fa-check"></i><b>21.5.1</b> Atajos</a></li>
<li class="chapter" data-level="21.5.2" data-path="iteracion.html"><a href="iteracion.html#r-base"><i class="fa fa-check"></i><b>21.5.2</b> R Base</a></li>
<li class="chapter" data-level="21.5.3" data-path="iteracion.html"><a href="iteracion.html#ejercicios-57"><i class="fa fa-check"></i><b>21.5.3</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="21.6" data-path="iteracion.html"><a href="iteracion.html#manejando-los-errores"><i class="fa fa-check"></i><b>21.6</b> Manejando los errores</a></li>
<li class="chapter" data-level="21.7" data-path="iteracion.html"><a href="iteracion.html#mapear-sobre-multiples-argumentos"><i class="fa fa-check"></i><b>21.7</b> Mapear sobre múltiples argumentos</a><ul>
<li class="chapter" data-level="21.7.1" data-path="iteracion.html"><a href="iteracion.html#llamando-distintas-funciones"><i class="fa fa-check"></i><b>21.7.1</b> Llamando distintas funciones</a></li>
</ul></li>
<li class="chapter" data-level="21.8" data-path="iteracion.html"><a href="iteracion.html#walk"><i class="fa fa-check"></i><b>21.8</b> Walk</a></li>
<li class="chapter" data-level="21.9" data-path="iteracion.html"><a href="iteracion.html#otros-patrones-para-los-loops-for"><i class="fa fa-check"></i><b>21.9</b> Otros patrones para los loops for</a><ul>
<li class="chapter" data-level="21.9.1" data-path="iteracion.html"><a href="iteracion.html#funciones-predicativas"><i class="fa fa-check"></i><b>21.9.1</b> Funciones predicativas</a></li>
<li class="chapter" data-level="21.9.2" data-path="iteracion.html"><a href="iteracion.html#reduce-y-accumulate"><i class="fa fa-check"></i><b>21.9.2</b> Reduce y accumulate</a></li>
<li class="chapter" data-level="21.9.3" data-path="iteracion.html"><a href="iteracion.html#ejercicios-58"><i class="fa fa-check"></i><b>21.9.3</b> Ejercicios</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>IV Model</b></span></li>
<li class="chapter" data-level="22" data-path="model-intro.html"><a href="model-intro.html"><i class="fa fa-check"></i><b>22</b> Introducción</a><ul>
<li class="chapter" data-level="22.1" data-path="model-intro.html"><a href="model-intro.html#generacion-de-hipotesis-vs.confirmacion-de-hipotesis"><i class="fa fa-check"></i><b>22.1</b> Generación de hipótesis vs. confirmación de hipótesis</a></li>
</ul></li>
<li class="chapter" data-level="23" data-path="modelos-conceptos-basicos.html"><a href="modelos-conceptos-basicos.html"><i class="fa fa-check"></i><b>23</b> Modelos: conceptos básicos</a><ul>
<li class="chapter" data-level="23.1" data-path="modelos-conceptos-basicos.html"><a href="modelos-conceptos-basicos.html#introduccion-15"><i class="fa fa-check"></i><b>23.1</b> Introducción</a><ul>
<li class="chapter" data-level="23.1.1" data-path="modelos-conceptos-basicos.html"><a href="modelos-conceptos-basicos.html#prerrequisitos-6"><i class="fa fa-check"></i><b>23.1.1</b> Prerrequisitos</a></li>
</ul></li>
<li class="chapter" data-level="23.2" data-path="modelos-conceptos-basicos.html"><a href="modelos-conceptos-basicos.html#un-modelo-simple"><i class="fa fa-check"></i><b>23.2</b> Un modelo simple</a><ul>
<li class="chapter" data-level="23.2.1" data-path="modelos-conceptos-basicos.html"><a href="modelos-conceptos-basicos.html#ejercicios-59"><i class="fa fa-check"></i><b>23.2.1</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="23.3" data-path="modelos-conceptos-basicos.html"><a href="modelos-conceptos-basicos.html#visualizando-modelos"><i class="fa fa-check"></i><b>23.3</b> Visualizando modelos</a><ul>
<li class="chapter" data-level="23.3.1" data-path="modelos-conceptos-basicos.html"><a href="modelos-conceptos-basicos.html#predicciones"><i class="fa fa-check"></i><b>23.3.1</b> Predicciones</a></li>
<li class="chapter" data-level="23.3.2" data-path="modelos-conceptos-basicos.html"><a href="modelos-conceptos-basicos.html#residuos"><i class="fa fa-check"></i><b>23.3.2</b> Residuos</a></li>
<li class="chapter" data-level="23.3.3" data-path="modelos-conceptos-basicos.html"><a href="modelos-conceptos-basicos.html#ejercicios-60"><i class="fa fa-check"></i><b>23.3.3</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="23.4" data-path="modelos-conceptos-basicos.html"><a href="modelos-conceptos-basicos.html#formulas-y-familias-de-modelos"><i class="fa fa-check"></i><b>23.4</b> Fórmulas y familias de modelos</a><ul>
<li class="chapter" data-level="23.4.1" data-path="modelos-conceptos-basicos.html"><a href="modelos-conceptos-basicos.html#variables-categoricas"><i class="fa fa-check"></i><b>23.4.1</b> Variables categóricas</a></li>
<li class="chapter" data-level="23.4.2" data-path="modelos-conceptos-basicos.html"><a href="modelos-conceptos-basicos.html#interacciones-continuas-y-categoricas"><i class="fa fa-check"></i><b>23.4.2</b> Interacciones (continuas y categóricas)</a></li>
<li class="chapter" data-level="23.4.3" data-path="modelos-conceptos-basicos.html"><a href="modelos-conceptos-basicos.html#interacciones-dos-variables-continuas"><i class="fa fa-check"></i><b>23.4.3</b> Interacciones (dos variables continuas)</a></li>
<li class="chapter" data-level="23.4.4" data-path="modelos-conceptos-basicos.html"><a href="modelos-conceptos-basicos.html#transformaciones"><i class="fa fa-check"></i><b>23.4.4</b> Transformaciones</a></li>
<li class="chapter" data-level="23.4.5" data-path="modelos-conceptos-basicos.html"><a href="modelos-conceptos-basicos.html#ejercicios-61"><i class="fa fa-check"></i><b>23.4.5</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="23.5" data-path="modelos-conceptos-basicos.html"><a href="modelos-conceptos-basicos.html#valores-faltantes-4"><i class="fa fa-check"></i><b>23.5</b> Valores faltantes</a></li>
<li class="chapter" data-level="23.6" data-path="modelos-conceptos-basicos.html"><a href="modelos-conceptos-basicos.html#otras-familias-de-modelos"><i class="fa fa-check"></i><b>23.6</b> Otras familias de modelos</a></li>
</ul></li>
<li class="chapter" data-level="24" data-path="construccion-de-modelos.html"><a href="construccion-de-modelos.html"><i class="fa fa-check"></i><b>24</b> Construcción de modelos</a><ul>
<li class="chapter" data-level="24.1" data-path="construccion-de-modelos.html"><a href="construccion-de-modelos.html#introduccion-16"><i class="fa fa-check"></i><b>24.1</b> Introducción</a><ul>
<li class="chapter" data-level="24.1.1" data-path="construccion-de-modelos.html"><a href="construccion-de-modelos.html#prerrequisitos-7"><i class="fa fa-check"></i><b>24.1.1</b> Prerrequisitos</a></li>
</ul></li>
<li class="chapter" data-level="24.2" data-path="construccion-de-modelos.html"><a href="construccion-de-modelos.html#diamond-prices"><i class="fa fa-check"></i><b>24.2</b> ¿Por qué los diamantes de baja calidad son más caros?</a><ul>
<li class="chapter" data-level="24.2.1" data-path="construccion-de-modelos.html"><a href="construccion-de-modelos.html#precio-y-quilates"><i class="fa fa-check"></i><b>24.2.1</b> Precio y quilates</a></li>
<li class="chapter" data-level="24.2.2" data-path="construccion-de-modelos.html"><a href="construccion-de-modelos.html#un-modelo-mas-complicado"><i class="fa fa-check"></i><b>24.2.2</b> Un modelo más complicado</a></li>
<li class="chapter" data-level="24.2.3" data-path="construccion-de-modelos.html"><a href="construccion-de-modelos.html#ejercicios-62"><i class="fa fa-check"></i><b>24.2.3</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="24.3" data-path="construccion-de-modelos.html"><a href="construccion-de-modelos.html#que-afecta-el-numero-de-vuelos-diarios"><i class="fa fa-check"></i><b>24.3</b> ¿Qué afecta el número de vuelos diarios?</a><ul>
<li class="chapter" data-level="24.3.1" data-path="construccion-de-modelos.html"><a href="construccion-de-modelos.html#dia-de-la-semana"><i class="fa fa-check"></i><b>24.3.1</b> Día de la semana</a></li>
<li class="chapter" data-level="24.3.2" data-path="construccion-de-modelos.html"><a href="construccion-de-modelos.html#efecto-estacional-del-sabado"><i class="fa fa-check"></i><b>24.3.2</b> Efecto estacional del sábado</a></li>
<li class="chapter" data-level="24.3.3" data-path="construccion-de-modelos.html"><a href="construccion-de-modelos.html#variables-calculadas"><i class="fa fa-check"></i><b>24.3.3</b> Variables calculadas</a></li>
<li class="chapter" data-level="24.3.4" data-path="construccion-de-modelos.html"><a href="construccion-de-modelos.html#epoca-del-ano-un-enfoque-alternativo"><i class="fa fa-check"></i><b>24.3.4</b> Época del año: un enfoque alternativo</a></li>
<li class="chapter" data-level="24.3.5" data-path="construccion-de-modelos.html"><a href="construccion-de-modelos.html#ejercicios-63"><i class="fa fa-check"></i><b>24.3.5</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="24.4" data-path="construccion-de-modelos.html"><a href="construccion-de-modelos.html#aprende-mas-sobre-los-modelos"><i class="fa fa-check"></i><b>24.4</b> Aprende más sobre los modelos</a></li>
</ul></li>
<li class="chapter" data-level="25" data-path="muchos-modelos.html"><a href="muchos-modelos.html"><i class="fa fa-check"></i><b>25</b> Muchos modelos</a><ul>
<li class="chapter" data-level="25.1" data-path="muchos-modelos.html"><a href="muchos-modelos.html#introduccion-17"><i class="fa fa-check"></i><b>25.1</b> Introducción</a><ul>
<li class="chapter" data-level="25.1.1" data-path="muchos-modelos.html"><a href="muchos-modelos.html#prerrequisitos-8"><i class="fa fa-check"></i><b>25.1.1</b> Prerrequisitos</a></li>
</ul></li>
<li class="chapter" data-level="25.2" data-path="muchos-modelos.html"><a href="muchos-modelos.html#gapminder"><i class="fa fa-check"></i><b>25.2</b> gapminder</a><ul>
<li class="chapter" data-level="25.2.1" data-path="muchos-modelos.html"><a href="muchos-modelos.html#datos-anidados"><i class="fa fa-check"></i><b>25.2.1</b> Datos anidados</a></li>
<li class="chapter" data-level="25.2.2" data-path="muchos-modelos.html"><a href="muchos-modelos.html#columnas-lista"><i class="fa fa-check"></i><b>25.2.2</b> Columnas-lista</a></li>
<li class="chapter" data-level="25.2.3" data-path="muchos-modelos.html"><a href="muchos-modelos.html#desanidando"><i class="fa fa-check"></i><b>25.2.3</b> Desanidando</a></li>
<li class="chapter" data-level="25.2.4" data-path="muchos-modelos.html"><a href="muchos-modelos.html#calidad-del-modelo"><i class="fa fa-check"></i><b>25.2.4</b> Calidad del modelo</a></li>
<li class="chapter" data-level="25.2.5" data-path="muchos-modelos.html"><a href="muchos-modelos.html#ejercicios-64"><i class="fa fa-check"></i><b>25.2.5</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="25.3" data-path="muchos-modelos.html"><a href="muchos-modelos.html#columnas-lista-1"><i class="fa fa-check"></i><b>25.3</b> Columnas-lista</a></li>
<li class="chapter" data-level="25.4" data-path="muchos-modelos.html"><a href="muchos-modelos.html#creando-columnas-lista"><i class="fa fa-check"></i><b>25.4</b> Creando columnas-lista</a><ul>
<li class="chapter" data-level="25.4.1" data-path="muchos-modelos.html"><a href="muchos-modelos.html#con-anidacion"><i class="fa fa-check"></i><b>25.4.1</b> Con anidación</a></li>
<li class="chapter" data-level="25.4.2" data-path="muchos-modelos.html"><a href="muchos-modelos.html#a-partir-de-funciones-vectorizadas"><i class="fa fa-check"></i><b>25.4.2</b> A partir de funciones vectorizadas</a></li>
<li class="chapter" data-level="25.4.3" data-path="muchos-modelos.html"><a href="muchos-modelos.html#a-partir-de-medidas-de-resumen-con-mas-de-un-valor"><i class="fa fa-check"></i><b>25.4.3</b> A partir de medidas de resumen con más de un valor</a></li>
<li class="chapter" data-level="25.4.4" data-path="muchos-modelos.html"><a href="muchos-modelos.html#a-partir-de-una-lista-nombrada"><i class="fa fa-check"></i><b>25.4.4</b> A partir de una lista nombrada</a></li>
<li class="chapter" data-level="25.4.5" data-path="muchos-modelos.html"><a href="muchos-modelos.html#ejercicios-65"><i class="fa fa-check"></i><b>25.4.5</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="25.5" data-path="muchos-modelos.html"><a href="muchos-modelos.html#simplificando-columnas-lista"><i class="fa fa-check"></i><b>25.5</b> Simplificando columnas-lista</a><ul>
<li class="chapter" data-level="25.5.1" data-path="muchos-modelos.html"><a href="muchos-modelos.html#lista-a-vector"><i class="fa fa-check"></i><b>25.5.1</b> Lista a vector</a></li>
<li class="chapter" data-level="25.5.2" data-path="muchos-modelos.html"><a href="muchos-modelos.html#desanidando-1"><i class="fa fa-check"></i><b>25.5.2</b> Desanidando</a></li>
<li class="chapter" data-level="25.5.3" data-path="muchos-modelos.html"><a href="muchos-modelos.html#ejercicios-66"><i class="fa fa-check"></i><b>25.5.3</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="25.6" data-path="muchos-modelos.html"><a href="muchos-modelos.html#haciendo-datos-ordenados-con-broom"><i class="fa fa-check"></i><b>25.6</b> Haciendo datos ordenados con broom</a></li>
</ul></li>
<li class="part"><span><b>V Comunicar</b></span></li>
<li class="chapter" data-level="26" data-path="introduccion-18.html"><a href="introduccion-18.html"><i class="fa fa-check"></i><b>26</b> Introducción</a></li>
<li class="chapter" data-level="27" data-path="r-markdown.html"><a href="r-markdown.html"><i class="fa fa-check"></i><b>27</b> R Markdown</a><ul>
<li class="chapter" data-level="27.1" data-path="r-markdown.html"><a href="r-markdown.html#introduccion-19"><i class="fa fa-check"></i><b>27.1</b> Introducción</a><ul>
<li class="chapter" data-level="27.1.1" data-path="r-markdown.html"><a href="r-markdown.html#prerequisitos-4"><i class="fa fa-check"></i><b>27.1.1</b> Prerequisitos</a></li>
</ul></li>
<li class="chapter" data-level="27.2" data-path="r-markdown.html"><a href="r-markdown.html#r-markdown-basico"><i class="fa fa-check"></i><b>27.2</b> R Markdown básico</a><ul>
<li class="chapter" data-level="27.2.1" data-path="r-markdown.html"><a href="r-markdown.html#ejercicios-67"><i class="fa fa-check"></i><b>27.2.1</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="27.3" data-path="r-markdown.html"><a href="r-markdown.html#formateo-de-texto-con-markdown"><i class="fa fa-check"></i><b>27.3</b> Formateo de texto con Markdown</a><ul>
<li class="chapter" data-level="27.3.1" data-path="r-markdown.html"><a href="r-markdown.html#ejercicios-68"><i class="fa fa-check"></i><b>27.3.1</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="27.4" data-path="r-markdown.html"><a href="r-markdown.html#bloques-de-codigo"><i class="fa fa-check"></i><b>27.4</b> Bloques de código</a><ul>
<li class="chapter" data-level="27.4.1" data-path="r-markdown.html"><a href="r-markdown.html#nombres-en-bloques"><i class="fa fa-check"></i><b>27.4.1</b> Nombres en bloques</a></li>
<li class="chapter" data-level="27.4.2" data-path="r-markdown.html"><a href="r-markdown.html#opciones-en-bloques"><i class="fa fa-check"></i><b>27.4.2</b> Opciones en bloques</a></li>
<li class="chapter" data-level="27.4.3" data-path="r-markdown.html"><a href="r-markdown.html#tablas"><i class="fa fa-check"></i><b>27.4.3</b> Tablas</a></li>
<li class="chapter" data-level="27.4.4" data-path="r-markdown.html"><a href="r-markdown.html#caching"><i class="fa fa-check"></i><b>27.4.4</b> Caching</a></li>
<li class="chapter" data-level="27.4.5" data-path="r-markdown.html"><a href="r-markdown.html#opciones-globales"><i class="fa fa-check"></i><b>27.4.5</b> Opciones globales</a></li>
<li class="chapter" data-level="27.4.6" data-path="r-markdown.html"><a href="r-markdown.html#codigo-en-la-linea"><i class="fa fa-check"></i><b>27.4.6</b> Código en la línea</a></li>
<li class="chapter" data-level="27.4.7" data-path="r-markdown.html"><a href="r-markdown.html#ejercicios-69"><i class="fa fa-check"></i><b>27.4.7</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="27.5" data-path="r-markdown.html"><a href="r-markdown.html#solucionando-problemas"><i class="fa fa-check"></i><b>27.5</b> Solucionando problemas</a></li>
<li class="chapter" data-level="27.6" data-path="r-markdown.html"><a href="r-markdown.html#encabezado-yaml"><i class="fa fa-check"></i><b>27.6</b> Encabezado YAML</a><ul>
<li class="chapter" data-level="27.6.1" data-path="r-markdown.html"><a href="r-markdown.html#parametros"><i class="fa fa-check"></i><b>27.6.1</b> Parámetros</a></li>
<li class="chapter" data-level="27.6.2" data-path="r-markdown.html"><a href="r-markdown.html#bibliografias-y-citas"><i class="fa fa-check"></i><b>27.6.2</b> Bibliografías y citas</a></li>
</ul></li>
<li class="chapter" data-level="27.7" data-path="r-markdown.html"><a href="r-markdown.html#aprendiendo-mas-3"><i class="fa fa-check"></i><b>27.7</b> Aprendiendo más</a></li>
</ul></li>
<li class="chapter" data-level="28" data-path="comunicar-con-graficos.html"><a href="comunicar-con-graficos.html"><i class="fa fa-check"></i><b>28</b> Comunicar con gráficos</a><ul>
<li class="chapter" data-level="28.1" data-path="comunicar-con-graficos.html"><a href="comunicar-con-graficos.html#introduccion-20"><i class="fa fa-check"></i><b>28.1</b> Introducción</a><ul>
<li class="chapter" data-level="28.1.1" data-path="comunicar-con-graficos.html"><a href="comunicar-con-graficos.html#prerrequisitos-9"><i class="fa fa-check"></i><b>28.1.1</b> Prerrequisitos</a></li>
</ul></li>
<li class="chapter" data-level="28.2" data-path="comunicar-con-graficos.html"><a href="comunicar-con-graficos.html#etiquetas"><i class="fa fa-check"></i><b>28.2</b> Etiquetas</a><ul>
<li class="chapter" data-level="28.2.1" data-path="comunicar-con-graficos.html"><a href="comunicar-con-graficos.html#ejercicios-70"><i class="fa fa-check"></i><b>28.2.1</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="28.3" data-path="comunicar-con-graficos.html"><a href="comunicar-con-graficos.html#anotaciones"><i class="fa fa-check"></i><b>28.3</b> Anotaciones</a><ul>
<li class="chapter" data-level="28.3.1" data-path="comunicar-con-graficos.html"><a href="comunicar-con-graficos.html#ejercicios-71"><i class="fa fa-check"></i><b>28.3.1</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="28.4" data-path="comunicar-con-graficos.html"><a href="comunicar-con-graficos.html#escalas"><i class="fa fa-check"></i><b>28.4</b> Escalas</a><ul>
<li class="chapter" data-level="28.4.1" data-path="comunicar-con-graficos.html"><a href="comunicar-con-graficos.html#marcas-de-los-ejes-y-leyendas"><i class="fa fa-check"></i><b>28.4.1</b> Marcas de los ejes y leyendas</a></li>
<li class="chapter" data-level="28.4.2" data-path="comunicar-con-graficos.html"><a href="comunicar-con-graficos.html#diseno-de-leyendas"><i class="fa fa-check"></i><b>28.4.2</b> Diseño de leyendas</a></li>
<li class="chapter" data-level="28.4.3" data-path="comunicar-con-graficos.html"><a href="comunicar-con-graficos.html#reemplazando-una-escala"><i class="fa fa-check"></i><b>28.4.3</b> Reemplazando una escala</a></li>
<li class="chapter" data-level="28.4.4" data-path="comunicar-con-graficos.html"><a href="comunicar-con-graficos.html#ejercicios-72"><i class="fa fa-check"></i><b>28.4.4</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="28.5" data-path="comunicar-con-graficos.html"><a href="comunicar-con-graficos.html#haciendo-zoom"><i class="fa fa-check"></i><b>28.5</b> Haciendo Zoom</a></li>
<li class="chapter" data-level="28.6" data-path="comunicar-con-graficos.html"><a href="comunicar-con-graficos.html#temas"><i class="fa fa-check"></i><b>28.6</b> Temas</a></li>
<li class="chapter" data-level="28.7" data-path="comunicar-con-graficos.html"><a href="comunicar-con-graficos.html#guardando-tus-graficos"><i class="fa fa-check"></i><b>28.7</b> Guardando tus gráficos</a><ul>
<li class="chapter" data-level="28.7.1" data-path="comunicar-con-graficos.html"><a href="comunicar-con-graficos.html#redimensionar-una-figura"><i class="fa fa-check"></i><b>28.7.1</b> Redimensionar una figura</a></li>
<li class="chapter" data-level="28.7.2" data-path="comunicar-con-graficos.html"><a href="comunicar-con-graficos.html#otras-opciones-importantes"><i class="fa fa-check"></i><b>28.7.2</b> Otras opciones importantes</a></li>
</ul></li>
<li class="chapter" data-level="28.8" data-path="comunicar-con-graficos.html"><a href="comunicar-con-graficos.html#aprendiendo-mas-4"><i class="fa fa-check"></i><b>28.8</b> Aprendiendo más</a></li>
</ul></li>
<li class="chapter" data-level="29" data-path="formatos-de-r-markdown.html"><a href="formatos-de-r-markdown.html"><i class="fa fa-check"></i><b>29</b> Formatos de R Markdown</a><ul>
<li class="chapter" data-level="29.1" data-path="formatos-de-r-markdown.html"><a href="formatos-de-r-markdown.html#introduccion-21"><i class="fa fa-check"></i><b>29.1</b> Introducción</a></li>
<li class="chapter" data-level="29.2" data-path="formatos-de-r-markdown.html"><a href="formatos-de-r-markdown.html#opciones-de-salida"><i class="fa fa-check"></i><b>29.2</b> Opciones de salida</a></li>
<li class="chapter" data-level="29.3" data-path="formatos-de-r-markdown.html"><a href="formatos-de-r-markdown.html#documentos"><i class="fa fa-check"></i><b>29.3</b> Documentos</a></li>
<li class="chapter" data-level="29.4" data-path="formatos-de-r-markdown.html"><a href="formatos-de-r-markdown.html#notebooks"><i class="fa fa-check"></i><b>29.4</b> Notebooks</a></li>
<li class="chapter" data-level="29.5" data-path="formatos-de-r-markdown.html"><a href="formatos-de-r-markdown.html#presentaciones"><i class="fa fa-check"></i><b>29.5</b> Presentaciones</a></li>
<li class="chapter" data-level="29.6" data-path="formatos-de-r-markdown.html"><a href="formatos-de-r-markdown.html#dashboards"><i class="fa fa-check"></i><b>29.6</b> Dashboards</a></li>
<li class="chapter" data-level="29.7" data-path="formatos-de-r-markdown.html"><a href="formatos-de-r-markdown.html#interactividad"><i class="fa fa-check"></i><b>29.7</b> Interactividad</a><ul>
<li class="chapter" data-level="29.7.1" data-path="formatos-de-r-markdown.html"><a href="formatos-de-r-markdown.html#htmlwidgets"><i class="fa fa-check"></i><b>29.7.1</b> htmlwidgets</a></li>
<li class="chapter" data-level="29.7.2" data-path="formatos-de-r-markdown.html"><a href="formatos-de-r-markdown.html#shiny"><i class="fa fa-check"></i><b>29.7.2</b> Shiny</a></li>
</ul></li>
<li class="chapter" data-level="29.8" data-path="formatos-de-r-markdown.html"><a href="formatos-de-r-markdown.html#sitios-web"><i class="fa fa-check"></i><b>29.8</b> Sitios Web</a></li>
<li class="chapter" data-level="29.9" data-path="formatos-de-r-markdown.html"><a href="formatos-de-r-markdown.html#otros-formatos"><i class="fa fa-check"></i><b>29.9</b> Otros Formatos</a></li>
<li class="chapter" data-level="29.10" data-path="formatos-de-r-markdown.html"><a href="formatos-de-r-markdown.html#aprende-mas"><i class="fa fa-check"></i><b>29.10</b> Aprende más</a></li>
</ul></li>
<li class="chapter" data-level="30" data-path="flujo-de-trabajo-en-r-markdown.html"><a href="flujo-de-trabajo-en-r-markdown.html"><i class="fa fa-check"></i><b>30</b> Flujo de trabajo en R Markdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R para Ciencia de Datos</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="iteracion" class="section level1">
<h1><span class="header-section-number">21</span> Iteración</h1>
<div id="introduccion-14" class="section level2">
<h2><span class="header-section-number">21.1</span> Introducción</h2>
<p>En <a href="funciones.html#funciones">funciones</a>, hablamos sobre la importancia de reducir la duplicación en el código creando funciones en lugar de copiar y pegar. Reducir la duplicación de código tiene tres beneficios principales:</p>
<ol style="list-style-type: decimal">
<li><p>Es más fácil ver el objetivo de tu código, lo diferente llama
más atención a la vista que aquello que permanece igual.</p></li>
<li><p>Es más sencillo responder a cambios en los requerimientos. A medida que tus
necesidades cambian, solo necesitarás realizar cambios en un lugar, en vez
de recordar cambiar en cada lugar donde copiaste y pegaste el código.</p></li>
<li><p>Es probable que tengas menos errores porque cada línea de código es
utilizado en más lugares.</p></li>
</ol>
<p>Una herramienta para reducir la duplicación de código son las funciones, que reducen dicha duplicación al identificar patrones repetidos de código y extraerlos en piezas independientes que pueden reutilizarse y actualizarse fácilmente. Otra herramienta para reducir la duplicación es la <strong>iteración</strong>, que te ayuda cuando necesitas hacer la misma tarea con múltiples entradas: repetir la misma operación en diferentes columnas o en diferentes conjuntos de datos.
En este capítulo aprenderás sobre dos paradigmas de iteración importantes: la programación imperativa y la programación funcional. Por el lado imperativo, tienes herramientas como bucles <em>for</em> (del inglés <em>para</em>) y bucles <em>while</em> (del inglés <em>mientras</em>), que son un gran lugar para comenzar porque hacen que la iteración sea muy explícita, por lo que es obvio qué está pasando. Sin embargo, los bucles <em>for</em> son bastante detallados y requieren bastante código que se duplica para cada bucle. La programación funcional (PF) ofrece herramientas para extraer este código duplicado, por lo que cada patrón común de bucle obtiene su propia función. Una vez que domines el vocabulario de PF, podrás resolver muchos problemas comunes de iteración con menos código, más facilidad y menos errores.</p>
<div id="pre-requisitos-1" class="section level3">
<h3><span class="header-section-number">21.1.1</span> Pre requisitos</h3>
<p>Una vez que hayas dominado los bucles <em>for</em> proporcionados por R base, aprenderás algunas de las potentes herramientas de programación proporcionadas por <strong>purrr</strong>, uno de los paquetes principales de <em>tidyverse</em>.</p>
<div class="sourceCode" id="cb560"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb560-1" data-line-number="1"><span class="kw">library</span>(tidyverse)</a>
<a class="sourceLine" id="cb560-2" data-line-number="2"><span class="kw">library</span>(datos)</a></code></pre></div>
</div>
</div>
<div id="bucles-for" class="section level2">
<h2><span class="header-section-number">21.2</span> Bucles <em>for</em></h2>
<p>Imagina que tenemos este simple <em>tibble</em>:</p>
<div class="sourceCode" id="cb561"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb561-1" data-line-number="1">df &lt;-<span class="st"> </span><span class="kw">tibble</span>(</a>
<a class="sourceLine" id="cb561-2" data-line-number="2">  <span class="dt">a =</span> <span class="kw">rnorm</span>(<span class="dv">10</span>),</a>
<a class="sourceLine" id="cb561-3" data-line-number="3">  <span class="dt">b =</span> <span class="kw">rnorm</span>(<span class="dv">10</span>),</a>
<a class="sourceLine" id="cb561-4" data-line-number="4">  <span class="dt">c =</span> <span class="kw">rnorm</span>(<span class="dv">10</span>),</a>
<a class="sourceLine" id="cb561-5" data-line-number="5">  <span class="dt">d =</span> <span class="kw">rnorm</span>(<span class="dv">10</span>)</a>
<a class="sourceLine" id="cb561-6" data-line-number="6">)</a></code></pre></div>
<p>Queremos calcular la mediana de cada columna. <em>Podrías hacerlo</em> copiando y pegando el siguiente código:</p>
<div class="sourceCode" id="cb562"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb562-1" data-line-number="1"><span class="kw">median</span>(df<span class="op">$</span>a)</a>
<a class="sourceLine" id="cb562-2" data-line-number="2"><span class="co">#&gt; [1] -0.246</span></a>
<a class="sourceLine" id="cb562-3" data-line-number="3"><span class="kw">median</span>(df<span class="op">$</span>b)</a>
<a class="sourceLine" id="cb562-4" data-line-number="4"><span class="co">#&gt; [1] -0.287</span></a>
<a class="sourceLine" id="cb562-5" data-line-number="5"><span class="kw">median</span>(df<span class="op">$</span>c)</a>
<a class="sourceLine" id="cb562-6" data-line-number="6"><span class="co">#&gt; [1] -0.0567</span></a>
<a class="sourceLine" id="cb562-7" data-line-number="7"><span class="kw">median</span>(df<span class="op">$</span>d)</a>
<a class="sourceLine" id="cb562-8" data-line-number="8"><span class="co">#&gt; [1] 0.144</span></a></code></pre></div>
<p>Pero eso rompe nuestra regla de oro: nunca copie y pegue más de dos veces. En cambio, podríamos usar un bucle <em>for</em>:</p>
<div class="sourceCode" id="cb563"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb563-1" data-line-number="1">output &lt;-<span class="st"> </span><span class="kw">vector</span>(<span class="st">&quot;double&quot;</span>, <span class="kw">ncol</span>(df))  <span class="co"># 1. _output_ (salida o resultado)</span></a>
<a class="sourceLine" id="cb563-2" data-line-number="2"><span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">seq_along</span>(df)) {            <span class="co"># 2. secuencia</span></a>
<a class="sourceLine" id="cb563-3" data-line-number="3">  output[[i]] &lt;-<span class="st"> </span><span class="kw">median</span>(df[[i]])      <span class="co"># 3. cuerpo</span></a>
<a class="sourceLine" id="cb563-4" data-line-number="4">}</a>
<a class="sourceLine" id="cb563-5" data-line-number="5">output</a>
<a class="sourceLine" id="cb563-6" data-line-number="6"><span class="co">#&gt; [1] -0.2458 -0.2873 -0.0567  0.1443</span></a></code></pre></div>
<p>Cada bucle tiene tres componentes:</p>
<ol style="list-style-type: decimal">
<li><p><strong>output</strong>: <code>output &lt;- vector(&quot;double&quot;, length(x))</code>.
Antes de comenzar el bucle, siempre debes asignar suficiente espacio
para la salida. Esto es muy importante para la eficiencia: si aumentas
el bucle <em>for</em> en cada iteración usando, por ejemplo, <code>c ()</code> , el bucle <em>for</em>
será muy lento.</p>
<p>Una forma general de crear un vector vacío de longitud dada es la función <code>vector ()</code>.
Tiene dos argumentos: el tipo de vector (<em>“logical”</em>,
<em>“integer”</em>, <em>“double”</em>, <em>“character”</em>, etc) y su longitud.</p></li>
<li><p>La <strong>secuencia</strong>: <code>i in seq_along (df)</code>. Este código determina sobre qué iterar:
cada ejecución del bucle <em>for</em> asignará a <code>i</code> un valor diferente de
<code>seq_along (df)</code>. Es útil pensar en <code>i</code> como un pronombre, como “eso”.</p>
<p>Es posible que no hayas visto <code>seq_along ()</code> con anterioridad. Es una versión segura de la
familiar <code>1:length(l)</code>, con una diferencia importante: si se tiene un
vector de longitud cero, <code>seq_along ()</code> hace lo correcto:</p>
<div class="sourceCode" id="cb564"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb564-1" data-line-number="1">y &lt;-<span class="st"> </span><span class="kw">vector</span>(<span class="st">&quot;double&quot;</span>, <span class="dv">0</span>)</a>
<a class="sourceLine" id="cb564-2" data-line-number="2"><span class="kw">seq_along</span>(y)</a>
<a class="sourceLine" id="cb564-3" data-line-number="3"><span class="co">#&gt; integer(0)</span></a>
<a class="sourceLine" id="cb564-4" data-line-number="4"><span class="dv">1</span><span class="op">:</span><span class="kw">length</span>(y)</a>
<a class="sourceLine" id="cb564-5" data-line-number="5"><span class="co">#&gt; [1] 1 0</span></a></code></pre></div>
<p>Probablemente no vas a crear un vector de longitud cero deliberadamente, pero
es fácil crearlos accidentalmente. Si usamos <code>1: length (x)</code> en lugar
de <code>seq_along (x)</code>, es posible que obtengamos un mensaje de error confuso.</p></li>
<li><p>El <strong>cuerpo</strong>: <code>output[[i]] &lt;- median(df[[i]])</code>. Este es el código que hace
el trabajo. Se ejecuta repetidamente, con un valor diferente para <code>i</code> cada vez.
La primera iteración ejecutará <code>output[[1]] &lt;- median(df[[1]])</code>,
la segunda ejecutará <code>output [[2]] &lt;- median (df [[2]])</code>, y así sucesivamente.</p></li>
</ol>
<p>¡Eso es todo lo que hay para el bucle <em>for</em>! Ahora es un buen momento para practicar creando algunos bucles <em>for</em> básicos (y no tan básicos) usando los ejercicios que se encuentran a continuación. Luego avanzaremos en algunas variaciones del bucle <em>for</em> que te ayudarán a resolver otros problemas que surgirán en la práctica.</p>
<div id="ejercicios-54" class="section level3">
<h3><span class="header-section-number">21.2.1</span> Ejercicios</h3>
<ol style="list-style-type: decimal">
<li><p>Escribir bucles <em>for</em> para:</p>
<ol style="list-style-type: decimal">
<li>Calcular la media de cada columna en <code>mtautos</code>.</li>
<li>Determinar el tipo de cada columna en <code>vuelos</code>.</li>
<li>Calcular el número de valores únicos en cada columna de <code>iris</code>.</li>
<li>Genera 10 normales aleatorias para cada valor de <span class="math inline">\(\mu = -10\)</span>, <span class="math inline">\(0\)</span>, <span class="math inline">\(10\)</span> y <span class="math inline">\(100\)</span>.</li>
</ol>
<p>Piensa en el resultado, la secuencia y el cuerpo <strong>antes</strong> de empezar a escribir
el bucle.</p></li>
<li><p>Elimina el bucle <em>for</em> en cada uno de los siguientes ejemplos tomando
ventaja de una función existente que trabaja con vectores:</p>
<div class="sourceCode" id="cb565"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb565-1" data-line-number="1">out &lt;-<span class="st"> &quot;&quot;</span></a>
<a class="sourceLine" id="cb565-2" data-line-number="2"><span class="cf">for</span> (x <span class="cf">in</span> letters) {</a>
<a class="sourceLine" id="cb565-3" data-line-number="3">  out &lt;-<span class="st"> </span>stringr<span class="op">::</span><span class="kw">str_c</span>(out, x)</a>
<a class="sourceLine" id="cb565-4" data-line-number="4">}</a>
<a class="sourceLine" id="cb565-5" data-line-number="5"></a>
<a class="sourceLine" id="cb565-6" data-line-number="6">x &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="dv">100</span>)</a>
<a class="sourceLine" id="cb565-7" data-line-number="7">sd &lt;-<span class="st"> </span><span class="dv">0</span></a>
<a class="sourceLine" id="cb565-8" data-line-number="8"><span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">seq_along</span>(x)) {</a>
<a class="sourceLine" id="cb565-9" data-line-number="9">  sd &lt;-<span class="st"> </span>sd <span class="op">+</span><span class="st"> </span>(x[i] <span class="op">-</span><span class="st"> </span><span class="kw">mean</span>(x)) <span class="op">^</span><span class="st"> </span><span class="dv">2</span></a>
<a class="sourceLine" id="cb565-10" data-line-number="10">}</a>
<a class="sourceLine" id="cb565-11" data-line-number="11">sd &lt;-<span class="st"> </span><span class="kw">sqrt</span>(sd <span class="op">/</span><span class="st"> </span>(<span class="kw">length</span>(x) <span class="op">-</span><span class="st"> </span><span class="dv">1</span>))</a>
<a class="sourceLine" id="cb565-12" data-line-number="12"></a>
<a class="sourceLine" id="cb565-13" data-line-number="13">x &lt;-<span class="st"> </span><span class="kw">runif</span>(<span class="dv">100</span>)</a>
<a class="sourceLine" id="cb565-14" data-line-number="14">out &lt;-<span class="st"> </span><span class="kw">vector</span>(<span class="st">&quot;numeric&quot;</span>, <span class="kw">length</span>(x))</a>
<a class="sourceLine" id="cb565-15" data-line-number="15">out[<span class="dv">1</span>] &lt;-<span class="st"> </span>x[<span class="dv">1</span>]</a>
<a class="sourceLine" id="cb565-16" data-line-number="16"><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">2</span><span class="op">:</span><span class="kw">length</span>(x)) {</a>
<a class="sourceLine" id="cb565-17" data-line-number="17">  out[i] &lt;-<span class="st"> </span>out[i <span class="op">-</span><span class="st"> </span><span class="dv">1</span>] <span class="op">+</span><span class="st"> </span>x[i]</a>
<a class="sourceLine" id="cb565-18" data-line-number="18">}</a></code></pre></div></li>
<li><p>Combina tus habilidades para escribir funciones y bucles <em>for</em>:</p>
<ol style="list-style-type: decimal">
<li><p>Escribe un bucle <em>for</em> que imprima (<em><code>prints()</code></em>) la letra de la canción de niños
“Cinco ranitas verdes”.</p></li>
<li><p>Convierte la canción infantil “10 monitos saltaban en la cama” en una función. Generalizar
a cualquier cantidad de monitos en cualquier estructura para dormir.</p></li>
<li><p>Convierte la canción “99 botellas de cerveza en la pared” en una función.
Generalizar a cualquier cantidad, de cualquier tipo de recipiente que contenga
cualquier líquido sobre cualquier superficie.</p></li>
</ol></li>
<li><p>Es común ver bucles <em>for</em> que no preasignan la salida y en su lugar
aumentan la longitud de un vector en cada paso:</p>
<div class="sourceCode" id="cb566"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb566-1" data-line-number="1">output &lt;-<span class="st"> </span><span class="kw">vector</span>(<span class="st">&quot;integer&quot;</span>, <span class="dv">0</span>)</a>
<a class="sourceLine" id="cb566-2" data-line-number="2"><span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">seq_along</span>(x)) {</a>
<a class="sourceLine" id="cb566-3" data-line-number="3">  output &lt;-<span class="st"> </span><span class="kw">c</span>(output, <span class="kw">lengths</span>(x[[i]]))</a>
<a class="sourceLine" id="cb566-4" data-line-number="4">}</a>
<a class="sourceLine" id="cb566-5" data-line-number="5">output</a></code></pre></div>
<p>¿Cómo afecta esto el rendimiento? Diseña y ejecuta un experimento.</p></li>
</ol>
</div>
</div>
<div id="variaciones-de-bucles-for" class="section level2">
<h2><span class="header-section-number">21.3</span> Variaciones de bucles <em>for</em></h2>
<p>Una vez que tienes el bucle <em>for</em> básico bajo tu cinturón, hay algunas variaciones que debes tener en cuenta. Estas variaciones son importantes independientemente de cómo hagas la iteración, así que no te olvides de ellas una vez que hayas dominado las técnicas de PF que aprenderás en la próxima sección.</p>
<p>Hay cuatro variaciones del ciclo <em>for</em> básico:</p>
<ol style="list-style-type: decimal">
<li>Modificar un objeto existente, en lugar de crear un nuevo objeto.</li>
<li>Iterar sobre nombres o valores, en lugar de índices.</li>
<li>Manejo de <em>outputs</em> de longitud desconocida.</li>
<li>Manejo de secuencias de longitud desconocida.</li>
</ol>
<div id="modificar-un-objeto-existente" class="section level3">
<h3><span class="header-section-number">21.3.1</span> Modificar un objeto existente</h3>
<p>Algunas veces quiere usar un bucle for para modificar un objeto existente. Por ejemplo, recuerda nuestro desafío de <a href="funciones.html#funciones">funciones</a>. Queríamos reescalar cada columna en un <em>data frame</em>:</p>
<div class="sourceCode" id="cb567"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb567-1" data-line-number="1">df &lt;-<span class="st"> </span><span class="kw">tibble</span>(</a>
<a class="sourceLine" id="cb567-2" data-line-number="2">  <span class="dt">a =</span> <span class="kw">rnorm</span>(<span class="dv">10</span>),</a>
<a class="sourceLine" id="cb567-3" data-line-number="3">  <span class="dt">b =</span> <span class="kw">rnorm</span>(<span class="dv">10</span>),</a>
<a class="sourceLine" id="cb567-4" data-line-number="4">  <span class="dt">c =</span> <span class="kw">rnorm</span>(<span class="dv">10</span>),</a>
<a class="sourceLine" id="cb567-5" data-line-number="5">  <span class="dt">d =</span> <span class="kw">rnorm</span>(<span class="dv">10</span>)</a>
<a class="sourceLine" id="cb567-6" data-line-number="6">)</a>
<a class="sourceLine" id="cb567-7" data-line-number="7">rescale01 &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</a>
<a class="sourceLine" id="cb567-8" data-line-number="8">  rng &lt;-<span class="st"> </span><span class="kw">range</span>(x, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb567-9" data-line-number="9">  (x <span class="op">-</span><span class="st"> </span>rng[<span class="dv">1</span>]) <span class="op">/</span><span class="st"> </span>(rng[<span class="dv">2</span>] <span class="op">-</span><span class="st"> </span>rng[<span class="dv">1</span>])</a>
<a class="sourceLine" id="cb567-10" data-line-number="10">}</a>
<a class="sourceLine" id="cb567-11" data-line-number="11"></a>
<a class="sourceLine" id="cb567-12" data-line-number="12">df<span class="op">$</span>a &lt;-<span class="st"> </span><span class="kw">rescale01</span>(df<span class="op">$</span>a)</a>
<a class="sourceLine" id="cb567-13" data-line-number="13">df<span class="op">$</span>b &lt;-<span class="st"> </span><span class="kw">rescale01</span>(df<span class="op">$</span>b)</a>
<a class="sourceLine" id="cb567-14" data-line-number="14">df<span class="op">$</span>c &lt;-<span class="st"> </span><span class="kw">rescale01</span>(df<span class="op">$</span>c)</a>
<a class="sourceLine" id="cb567-15" data-line-number="15">df<span class="op">$</span>d &lt;-<span class="st"> </span><span class="kw">rescale01</span>(df<span class="op">$</span>d)</a></code></pre></div>
<p>Para resolver esto con un bucle <em>for</em>, volvemos a pensar en los tres componentes:</p>
<ol style="list-style-type: decimal">
<li><p><strong>Output</strong>: ya tenemos el <em>output</em> — ¡es lo mismo que la entrada!</p></li>
<li><p><strong>Secuencia</strong>: podemos pensar en un <em>data frame</em> como una lista de columnas, por lo
que podemos iterar sobre cada columna con <code>seq_along (df)</code>.</p></li>
<li><p><strong>Cuerpo</strong>: aplicar <code>rescale01 ()</code>.</p></li>
</ol>
<p>Esto nos da:</p>
<div class="sourceCode" id="cb568"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb568-1" data-line-number="1"><span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">seq_along</span>(df)) {</a>
<a class="sourceLine" id="cb568-2" data-line-number="2">  df[[i]] &lt;-<span class="st"> </span><span class="kw">rescale01</span>(df[[i]])</a>
<a class="sourceLine" id="cb568-3" data-line-number="3">}</a></code></pre></div>
<p>Por lo general, se modificará una lista o un <em>data frame</em> con este tipo de bucle, así que recuerde usar <code>[[</code>, not <code>[</code>. Podrás haber visto que usamos <code>[[</code> en todos los bucles <em>for</em>: creemos que es mejor usar <code>[[</code> incluso para vectores atómicos porque deja en claro que queremos trabajar con un solo elemento.</p>
</div>
<div id="patrones-de-bucle" class="section level3">
<h3><span class="header-section-number">21.3.2</span> Patrones de bucle</h3>
<p>Hay tres formas básicas de hacer un bucle sobre un vector. Hasta ahora hemos visto la más general: iterar sobre los índices numéricos con <code>for (i in seq_along (xs))</code>, y extraer el valor con <code>x [[i]]</code>. Hay otras dos formas:</p>
<ol style="list-style-type: decimal">
<li><p>Iterar sobre los elementos: <code>for (x in xs)</code>. Esta forma es la más útil si solo
te preocupas por los efectos secundario, como graficar o grabar un archivo, porque es
dificil almacenar la salida (<em>output</em>) de forma eficiente.</p></li>
<li><p>Iterar sobre los nombres: <code>for (nm in names(xs))</code>. te da el nombre, que se puede usar para acceder al valor con <code>x [[nm]]</code>.
Esto es útil si queremos utilizar el nombre en el título de un gráfico o
en el nombre de un archivo. Si estas creando una salida con nombre, asegúrate de nombrar el vector de resultados de esta manera:</p>
<div class="sourceCode" id="cb569"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb569-1" data-line-number="1">results &lt;-<span class="st"> </span><span class="kw">vector</span>(<span class="st">&quot;list&quot;</span>, <span class="kw">length</span>(x))</a>
<a class="sourceLine" id="cb569-2" data-line-number="2"><span class="kw">names</span>(results) &lt;-<span class="st"> </span><span class="kw">names</span>(x)</a></code></pre></div></li>
<li><p>Iterar sobre los índices numéricos es la forma más general, porque dada la posición se puede extraer tanto el nombre como el valor:</p></li>
</ol>
<div class="sourceCode" id="cb570"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb570-1" data-line-number="1"><span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">seq_along</span>(x)) {</a>
<a class="sourceLine" id="cb570-2" data-line-number="2">  name &lt;-<span class="st"> </span><span class="kw">names</span>(x)[[i]]</a>
<a class="sourceLine" id="cb570-3" data-line-number="3">  value &lt;-<span class="st"> </span>x[[i]]</a>
<a class="sourceLine" id="cb570-4" data-line-number="4">}</a></code></pre></div>
</div>
<div id="longitud-de-output-desconocida" class="section level3">
<h3><span class="header-section-number">21.3.3</span> Longitud de <em>output</em> desconocida</h3>
<p>Es posible que algunas veces no sepas el tamaño que tendrá el <em>output</em>. Por ejemplo, imagina que quieres simular algunos vectores aleatorios de longitudes aleatorias. Podrías tentarte a resolver este problema haciendo crecer progresivamente el vector:</p>
<div class="sourceCode" id="cb571"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb571-1" data-line-number="1">means &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb571-2" data-line-number="2"></a>
<a class="sourceLine" id="cb571-3" data-line-number="3">output &lt;-<span class="st"> </span><span class="kw">double</span>()</a>
<a class="sourceLine" id="cb571-4" data-line-number="4"><span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">seq_along</span>(means)) {</a>
<a class="sourceLine" id="cb571-5" data-line-number="5">  n &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="dv">100</span>, <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb571-6" data-line-number="6">  output &lt;-<span class="st"> </span><span class="kw">c</span>(output, <span class="kw">rnorm</span>(n, means[[i]]))</a>
<a class="sourceLine" id="cb571-7" data-line-number="7">}</a>
<a class="sourceLine" id="cb571-8" data-line-number="8"><span class="kw">str</span>(output)</a>
<a class="sourceLine" id="cb571-9" data-line-number="9"><span class="co">#&gt;  num [1:138] 0.912 0.205 2.584 -0.789 0.588 ...</span></a></code></pre></div>
<p>Pero esto no es muy eficiente porque en cada iteración, R tiene que copiar todos los datos de las iteraciones anteriores. En términos técnicos, obtiene un comportamiento “cuadrático” (<span class="math inline">\(O(n^2)\)</span>), lo que significa que un bucle que tiene tres veces más elementos tomaría nueve (<span class="math inline">\(3^2\)</span>) veces más tiempo de ejecución.</p>
<p>Una mejor solución es guardar los resultados en una lista, y luego combinarlos en un solo vector después de que se complete el ciclo:</p>
<div class="sourceCode" id="cb572"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb572-1" data-line-number="1">out &lt;-<span class="st"> </span><span class="kw">vector</span>(<span class="st">&quot;list&quot;</span>, <span class="kw">length</span>(means))</a>
<a class="sourceLine" id="cb572-2" data-line-number="2"><span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">seq_along</span>(means)) {</a>
<a class="sourceLine" id="cb572-3" data-line-number="3">  n &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="dv">100</span>, <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb572-4" data-line-number="4">  out[[i]] &lt;-<span class="st"> </span><span class="kw">rnorm</span>(n, means[[i]])</a>
<a class="sourceLine" id="cb572-5" data-line-number="5">}</a>
<a class="sourceLine" id="cb572-6" data-line-number="6"><span class="kw">str</span>(out)</a>
<a class="sourceLine" id="cb572-7" data-line-number="7"><span class="co">#&gt; List of 3</span></a>
<a class="sourceLine" id="cb572-8" data-line-number="8"><span class="co">#&gt;  $ : num [1:76] -0.3389 -0.0756 0.0402 0.1243 -0.9984 ...</span></a>
<a class="sourceLine" id="cb572-9" data-line-number="9"><span class="co">#&gt;  $ : num [1:17] -0.11 1.149 0.614 0.77 1.392 ...</span></a>
<a class="sourceLine" id="cb572-10" data-line-number="10"><span class="co">#&gt;  $ : num [1:41] 1.88 2.46 2.62 1.82 1.88 ...</span></a>
<a class="sourceLine" id="cb572-11" data-line-number="11"><span class="kw">str</span>(<span class="kw">unlist</span>(out))</a>
<a class="sourceLine" id="cb572-12" data-line-number="12"><span class="co">#&gt;  num [1:134] -0.3389 -0.0756 0.0402 0.1243 -0.9984 ...</span></a></code></pre></div>
<p>Aquí usamos <code>unlist ()</code> (del inglés <em>deslistar</em>) para aplanar una lista de vectores en un solo vector. Una opción más estricta es usar <code>purrr :: flatten_dbl ()</code> (del inglés <em>aplanar</em>) — arrojará un error si la entrada no es una lista de dobles.</p>
<p>Este patrón ocurre también en otros lugares:</p>
<ol style="list-style-type: decimal">
<li><p>Podriamos estar generando una cadena larga. En lugar de pegar (<code>paste ()</code>) juntos
cada iteración con la anterior, guardamos el <em>output</em> en un vector de caracteres y
luego combinamos ese vector en una cadena con
<code>paste(output, collapse = &quot;&quot;)</code>.</p></li>
<li><p>Podríamos estar generando un <em>data frame</em> grande. En lugar de enlazar (<code>rbind ()</code>) secuencialmente
en cada iteración, guardamos el resultado en una lista y luego usamos
<code>dplyr::bind_rows(output)</code> para combinar el <em>output</em> en un solo <em>data frame</em>.</p></li>
</ol>
<p>Cuidado con este patrón. Cuando lo veamos, cambiemos a un objeto de resultado más complejo y luego lo combinamos en un paso al final.</p>
</div>
<div id="longitud-de-secuencia-desconocida" class="section level3">
<h3><span class="header-section-number">21.3.4</span> Longitud de secuencia desconocida</h3>
<p>A veces ni siquiera sabemos cuánto tiempo puede durar la secuencia de entrada. Esto es común cuando se hacen simulaciones. Por ejemplo, es posible que se quiera realizar un bucle hasta que se obtengan tres cabezas seguidas. No podemos hacer ese tipo de iteración con un bucle <em>for</em>. En su lugar, podemos utilizar un bucle <em>while</em> (del inglés <em>mientras</em>). Un bucle <em>while</em> es más simple que el bucle <em>for</em> porque solo tiene dos componentes, una condición y un cuerpo:</p>
<div class="sourceCode" id="cb573"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb573-1" data-line-number="1"><span class="cf">while</span> (condición) {</a>
<a class="sourceLine" id="cb573-2" data-line-number="2">  <span class="co"># cuerpo</span></a>
<a class="sourceLine" id="cb573-3" data-line-number="3">}</a></code></pre></div>
<p>Un bucle <em>while</em> también es más general que un bucle <em>for</em>, porque podemos reescribir cualquier bucle <em>for</em> como un bucle <em>while</em>, pero no podemos reescribir cada bucle <em>while</em> como un bucle <em>for</em>:</p>
<div class="sourceCode" id="cb574"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb574-1" data-line-number="1"><span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">seq_along</span>(x)) {</a>
<a class="sourceLine" id="cb574-2" data-line-number="2">  <span class="co"># cuerpo</span></a>
<a class="sourceLine" id="cb574-3" data-line-number="3">}</a>
<a class="sourceLine" id="cb574-4" data-line-number="4"></a>
<a class="sourceLine" id="cb574-5" data-line-number="5"><span class="co"># Equivalente a </span></a>
<a class="sourceLine" id="cb574-6" data-line-number="6">i &lt;-<span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb574-7" data-line-number="7"><span class="cf">while</span> (i <span class="op">&lt;=</span><span class="st"> </span><span class="kw">length</span>(x)) {</a>
<a class="sourceLine" id="cb574-8" data-line-number="8">  <span class="co"># cuerpo</span></a>
<a class="sourceLine" id="cb574-9" data-line-number="9">  i &lt;-<span class="st"> </span>i <span class="op">+</span><span class="st"> </span><span class="dv">1</span> </a>
<a class="sourceLine" id="cb574-10" data-line-number="10">}</a></code></pre></div>
<p>Así es como podríamos usar un bucle <em>while</em> para encontrar cuántos intentos se necesitan para obtener tres cabezas (<em>heads</em> en inglés) seguidas:</p>
<div class="sourceCode" id="cb575"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb575-1" data-line-number="1">flip &lt;-<span class="st"> </span><span class="cf">function</span>() <span class="kw">sample</span>(<span class="kw">c</span>(<span class="st">&quot;T&quot;</span>, <span class="st">&quot;H&quot;</span>), <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb575-2" data-line-number="2"></a>
<a class="sourceLine" id="cb575-3" data-line-number="3">flips &lt;-<span class="st"> </span><span class="dv">0</span></a>
<a class="sourceLine" id="cb575-4" data-line-number="4">nheads &lt;-<span class="st"> </span><span class="dv">0</span></a>
<a class="sourceLine" id="cb575-5" data-line-number="5"></a>
<a class="sourceLine" id="cb575-6" data-line-number="6"><span class="cf">while</span> (nheads <span class="op">&lt;</span><span class="st"> </span><span class="dv">3</span>) {</a>
<a class="sourceLine" id="cb575-7" data-line-number="7">  <span class="cf">if</span> (<span class="kw">flip</span>() <span class="op">==</span><span class="st"> &quot;H&quot;</span>) {</a>
<a class="sourceLine" id="cb575-8" data-line-number="8">    nheads &lt;-<span class="st"> </span>nheads <span class="op">+</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb575-9" data-line-number="9">  } <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb575-10" data-line-number="10">    nheads &lt;-<span class="st"> </span><span class="dv">0</span></a>
<a class="sourceLine" id="cb575-11" data-line-number="11">  }</a>
<a class="sourceLine" id="cb575-12" data-line-number="12">  flips &lt;-<span class="st"> </span>flips <span class="op">+</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb575-13" data-line-number="13">}</a>
<a class="sourceLine" id="cb575-14" data-line-number="14">flips</a>
<a class="sourceLine" id="cb575-15" data-line-number="15"><span class="co">#&gt; [1] 21</span></a></code></pre></div>
<p>Mencionamos los bucles <em>while</em> brevemente, porque casi nunca los usamos. Se utilizan con mayor frecuencia para la simulación, que está fuera del alcance de este libro. Sin embargo, es bueno saber que existen para que estemos preparado para problemas en los que el número de iteraciones no se conoce de antemano.</p>
</div>
<div id="ejercicios-55" class="section level3">
<h3><span class="header-section-number">21.3.5</span> Ejercicios</h3>
<ol style="list-style-type: decimal">
<li><p>Imaginemos que tenemos un directorio lleno de archivos CSV que queremos leer.
Tenemos sus ubicaciones en un vector,
<code>files &lt;- dir(&quot;data/&quot;, pattern = &quot;\\.csv$&quot;, full.names = TRUE)</code>, y ahora
queremos leer cada uno con <code>read_csv()</code>. Escribe un bucle <em>for</em> que los
cargue en un solo <em>data frame</em>.</p></li>
<li><p>¿Qué pasa si utilizamos <code>for (nm in names(x))</code> y <code>x</code> no tiene <em>names</em>?
¿Qué pasa si solo algunos elementos están nombrados (<em>named</em> en inglés)
¿Qué pasa si los nombres (<em>names</em> en inglés) no son únicos?</p></li>
<li><p>Escribe una función que imprima el promedio de cada columna numérica en un
<em>data frame</em>, junto con su nombre. Por ejemplo, <code>mostrar_promedio(iris)</code> debe imprimir:</p>
<div class="sourceCode" id="cb576"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb576-1" data-line-number="1"><span class="kw">mostrar_promedio</span>(iris)</a>
<a class="sourceLine" id="cb576-2" data-line-number="2"><span class="co">#&gt; Sepal.Length: 5.84</span></a>
<a class="sourceLine" id="cb576-3" data-line-number="3"><span class="co">#&gt; Sepal.Width:  3.06</span></a>
<a class="sourceLine" id="cb576-4" data-line-number="4"><span class="co">#&gt; Petal.Length: 3.76</span></a>
<a class="sourceLine" id="cb576-5" data-line-number="5"><span class="co">#&gt; Petal.Width:  1.20</span></a></code></pre></div>
<p>(Desafío adicional: ¿qué función utilizamos para asegurarnos que los números
queden alineados a pesar que los nombres de las variables tienen diferentes longitudes?)</p></li>
<li><p>¿Qué hace este código? ¿cómo funciona?</p>
<div class="sourceCode" id="cb577"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb577-1" data-line-number="1">trans &lt;-<span class="st"> </span><span class="kw">list</span>( </a>
<a class="sourceLine" id="cb577-2" data-line-number="2">  <span class="dt">disp =</span> <span class="cf">function</span>(x) x <span class="op">*</span><span class="st"> </span><span class="fl">0.0163871</span>,</a>
<a class="sourceLine" id="cb577-3" data-line-number="3">  <span class="dt">am =</span> <span class="cf">function</span>(x) {</a>
<a class="sourceLine" id="cb577-4" data-line-number="4">    <span class="kw">factor</span>(x, <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;auto&quot;</span>, <span class="st">&quot;manual&quot;</span>))</a>
<a class="sourceLine" id="cb577-5" data-line-number="5">  }</a>
<a class="sourceLine" id="cb577-6" data-line-number="6">)</a>
<a class="sourceLine" id="cb577-7" data-line-number="7"><span class="cf">for</span> (var <span class="cf">in</span> <span class="kw">names</span>(trans)) {</a>
<a class="sourceLine" id="cb577-8" data-line-number="8">  mtcars[[var]] &lt;-<span class="st"> </span>trans[[var]](mtcars[[var]])</a>
<a class="sourceLine" id="cb577-9" data-line-number="9">}</a></code></pre></div></li>
</ol>
</div>
</div>
<div id="bucles-for-vs.funcionales" class="section level2">
<h2><span class="header-section-number">21.4</span> Bucles <em>for</em> vs. funcionales</h2>
<p>Los bucles <em>for</em> no son tan importantes en R como en otros lenguajes porque R es un lenguaje de programación funcional. Esto significa que es posible envolver los bucles en una función y llamar a esa función en lugar de usar el bucle <em>for</em> directamente.</p>
<p>Para ver por qué esto es importante, consideremos (nuevamente) este simple <em>data frame</em>:</p>
<div class="sourceCode" id="cb578"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb578-1" data-line-number="1">df &lt;-<span class="st"> </span><span class="kw">tibble</span>(</a>
<a class="sourceLine" id="cb578-2" data-line-number="2">  <span class="dt">a =</span> <span class="kw">rnorm</span>(<span class="dv">10</span>),</a>
<a class="sourceLine" id="cb578-3" data-line-number="3">  <span class="dt">b =</span> <span class="kw">rnorm</span>(<span class="dv">10</span>),</a>
<a class="sourceLine" id="cb578-4" data-line-number="4">  <span class="dt">c =</span> <span class="kw">rnorm</span>(<span class="dv">10</span>),</a>
<a class="sourceLine" id="cb578-5" data-line-number="5">  <span class="dt">d =</span> <span class="kw">rnorm</span>(<span class="dv">10</span>)</a>
<a class="sourceLine" id="cb578-6" data-line-number="6">)</a></code></pre></div>
<p>Imaginemos que queremos calcular la media de cada columna. Podríamos hacer eso con un bucle <em>for</em>:</p>
<div class="sourceCode" id="cb579"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb579-1" data-line-number="1">output &lt;-<span class="st"> </span><span class="kw">vector</span>(<span class="st">&quot;double&quot;</span>, <span class="kw">length</span>(df))</a>
<a class="sourceLine" id="cb579-2" data-line-number="2"><span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">seq_along</span>(df)) {</a>
<a class="sourceLine" id="cb579-3" data-line-number="3">  output[[i]] &lt;-<span class="st"> </span><span class="kw">mean</span>(df[[i]])</a>
<a class="sourceLine" id="cb579-4" data-line-number="4">}</a>
<a class="sourceLine" id="cb579-5" data-line-number="5">output</a>
<a class="sourceLine" id="cb579-6" data-line-number="6"><span class="co">#&gt; [1] -0.326  0.136  0.429 -0.250</span></a></code></pre></div>
<p>Nos damos cuenta que vamos a querer calcular los promedios de cada columna con bastante frecuencia, por lo que lo extraemos en una función:</p>
<div class="sourceCode" id="cb580"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb580-1" data-line-number="1">col_mean &lt;-<span class="st"> </span><span class="cf">function</span>(df) {</a>
<a class="sourceLine" id="cb580-2" data-line-number="2">  output &lt;-<span class="st"> </span><span class="kw">vector</span>(<span class="st">&quot;double&quot;</span>, <span class="kw">length</span>(df))</a>
<a class="sourceLine" id="cb580-3" data-line-number="3">  <span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">seq_along</span>(df)) {</a>
<a class="sourceLine" id="cb580-4" data-line-number="4">    output[i] &lt;-<span class="st"> </span><span class="kw">mean</span>(df[[i]])</a>
<a class="sourceLine" id="cb580-5" data-line-number="5">  }</a>
<a class="sourceLine" id="cb580-6" data-line-number="6">  output</a>
<a class="sourceLine" id="cb580-7" data-line-number="7">}</a></code></pre></div>
<p>Pero entonces pensamos que también sería útil poder calcular la mediana y la desviación estándar, así que copiamos y pegamos la función <code>col_mean ()</code> y reemplazamos <code>mean ()</code> con <code>median ()</code> y <code>sd ()</code>:</p>
<div class="sourceCode" id="cb581"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb581-1" data-line-number="1">col_median &lt;-<span class="st"> </span><span class="cf">function</span>(df) {</a>
<a class="sourceLine" id="cb581-2" data-line-number="2">  output &lt;-<span class="st"> </span><span class="kw">vector</span>(<span class="st">&quot;double&quot;</span>, <span class="kw">length</span>(df))</a>
<a class="sourceLine" id="cb581-3" data-line-number="3">  <span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">seq_along</span>(df)) {</a>
<a class="sourceLine" id="cb581-4" data-line-number="4">    output[i] &lt;-<span class="st"> </span><span class="kw">median</span>(df[[i]])</a>
<a class="sourceLine" id="cb581-5" data-line-number="5">  }</a>
<a class="sourceLine" id="cb581-6" data-line-number="6">  output</a>
<a class="sourceLine" id="cb581-7" data-line-number="7">}</a>
<a class="sourceLine" id="cb581-8" data-line-number="8">col_sd &lt;-<span class="st"> </span><span class="cf">function</span>(df) {</a>
<a class="sourceLine" id="cb581-9" data-line-number="9">  output &lt;-<span class="st"> </span><span class="kw">vector</span>(<span class="st">&quot;double&quot;</span>, <span class="kw">length</span>(df))</a>
<a class="sourceLine" id="cb581-10" data-line-number="10">  <span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">seq_along</span>(df)) {</a>
<a class="sourceLine" id="cb581-11" data-line-number="11">    output[i] &lt;-<span class="st"> </span><span class="kw">sd</span>(df[[i]])</a>
<a class="sourceLine" id="cb581-12" data-line-number="12">  }</a>
<a class="sourceLine" id="cb581-13" data-line-number="13">  output</a>
<a class="sourceLine" id="cb581-14" data-line-number="14">}</a></code></pre></div>
<p>¡Oh oh! Copiamos y pegamos este código dos veces, por lo que es hora de pensar cómo generalizarlo. Tengamos en cuenta que la mayoría de este código corresponde al <em>for</em> y es repetitivo, haciendo difícil ver la única cosa (<code>mean ()</code>, <code>median ()</code>, <code>sd ()</code>) que es diferente entre las funciones.</p>
<p>¿Qué podemos hacer si vemos un conjunto de funciones como esta?:</p>
<div class="sourceCode" id="cb582"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb582-1" data-line-number="1">f1 &lt;-<span class="st"> </span><span class="cf">function</span>(x) <span class="kw">abs</span>(x <span class="op">-</span><span class="st"> </span><span class="kw">mean</span>(x)) <span class="op">^</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb582-2" data-line-number="2">f2 &lt;-<span class="st"> </span><span class="cf">function</span>(x) <span class="kw">abs</span>(x <span class="op">-</span><span class="st"> </span><span class="kw">mean</span>(x)) <span class="op">^</span><span class="st"> </span><span class="dv">2</span></a>
<a class="sourceLine" id="cb582-3" data-line-number="3">f3 &lt;-<span class="st"> </span><span class="cf">function</span>(x) <span class="kw">abs</span>(x <span class="op">-</span><span class="st"> </span><span class="kw">mean</span>(x)) <span class="op">^</span><span class="st"> </span><span class="dv">3</span></a></code></pre></div>
<p>Con suerte, notaremos que hay mucha duplicación y la extraeremos en un argumento adicional:</p>
<div class="sourceCode" id="cb583"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb583-1" data-line-number="1">f &lt;-<span class="st"> </span><span class="cf">function</span>(x, i) <span class="kw">abs</span>(x <span class="op">-</span><span class="st"> </span><span class="kw">mean</span>(x)) <span class="op">^</span><span class="st"> </span>i</a></code></pre></div>
<p>Hemos reducido la posibilidad de errores (porque ahora tenemos 1/3 menos de código) y hemos facilitado la generalización de situaciones nuevas.</p>
<p>Podemos hacer exactamente lo mismo con <code>col_mean ()</code>, <code>col_median ()</code> y <code>col_sd ()</code> agregando un argumento que proporciona la función para aplicar a cada columna:</p>
<div class="sourceCode" id="cb584"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb584-1" data-line-number="1">col_summary &lt;-<span class="st"> </span><span class="cf">function</span>(df, fun) {</a>
<a class="sourceLine" id="cb584-2" data-line-number="2">  out &lt;-<span class="st"> </span><span class="kw">vector</span>(<span class="st">&quot;double&quot;</span>, <span class="kw">length</span>(df))</a>
<a class="sourceLine" id="cb584-3" data-line-number="3">  <span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">seq_along</span>(df)) {</a>
<a class="sourceLine" id="cb584-4" data-line-number="4">    out[i] &lt;-<span class="st"> </span><span class="kw">fun</span>(df[[i]])</a>
<a class="sourceLine" id="cb584-5" data-line-number="5">  }</a>
<a class="sourceLine" id="cb584-6" data-line-number="6">  out</a>
<a class="sourceLine" id="cb584-7" data-line-number="7">}</a>
<a class="sourceLine" id="cb584-8" data-line-number="8"><span class="kw">col_summary</span>(df, median)</a>
<a class="sourceLine" id="cb584-9" data-line-number="9"><span class="co">#&gt; [1] -0.5185  0.0278  0.1730 -0.6116</span></a>
<a class="sourceLine" id="cb584-10" data-line-number="10"><span class="kw">col_summary</span>(df, mean)</a>
<a class="sourceLine" id="cb584-11" data-line-number="11"><span class="co">#&gt; [1] -0.326  0.136  0.429 -0.250</span></a></code></pre></div>
<p>La idea de pasar una función a otra es extremadamente poderosa, y es uno de los comportamientos que hacen de R un lenguaje de programación funcional. Puede que te tome un tiempo comprender la idea, pero vale la pena el esfuerzo. En el resto del capítulo, aprenderás y usarás el paquete <strong>purrr</strong>, que proporciona funciones que eliminan la necesidad de muchos bucles comunes. La familia de funciones de <em>apply</em> (aplicar en innglés) en base R (<code>apply ()</code>, <code>lapply ()</code>, <code>tapply ()</code>, etc.) resuelve un problema similar, pero <em>purrr</em> es más consistente y por lo tanto es más fácil de aprender.</p>
<p>El objetivo de usar las funciones <em>purrr</em> en lugar de los bucles es permitir dividir los desafíos comunes de manipulación de listas en partes independientes:</p>
<ol style="list-style-type: decimal">
<li><p>¿Cómo podemos resolver el problema para un solo elemento de la lista?
Una vez que encontramos la solución, <em>purrr</em> se encarga de generalizala
a cada elemento de la lista.</p></li>
<li><p>Si estamos resolviendo un problema complejo, ¿cómo podemos dividirlo
en pequeñas etapas que nos permitan avanzar paso a paso hacia la solución?
Con <strong>purrr</strong>, obtienes muchas piezas pequeñas que puedes ensamblar junto con el <em>pipe</em>.</p></li>
</ol>
<p>Esta estructura facilita la resolución de nuevos problemas. También hace que sea más fácil entender nuestras soluciones a problemas antiguos cuando releemos un código anterior.</p>
<div id="ejercicios-56" class="section level3">
<h3><span class="header-section-number">21.4.1</span> Ejercicios</h3>
<ol style="list-style-type: decimal">
<li><p>Lee la documentación para <code>apply ()</code>. En el caso 2d, ¿qué dos bucles <em>for</em> generaliza?</p></li>
<li><p>Adapta <code>col_summary ()</code> para que solo se aplique a las columnas numéricas.
Es posible que desees comenzar con la función <code>is_numeric ()</code> que devuelve un vector lógico que tenga un <em>TRUE</em> por cada columna numérica.</p></li>
</ol>
</div>
</div>
<div id="las-funciones-map-mapa-en-ingles" class="section level2">
<h2><span class="header-section-number">21.5</span> Las funciones <em>map</em> (mapa en inglés)</h2>
<p>El patrón de iterar sobre un vector, hacer algo con cada elemento y guardar los resultados es tan común que el paquete <strong>purrr</strong> proporciona una familia de funciones para que lo hagan por nosotros. Hay una función para cada tipo de <em>output</em>:</p>
<ul>
<li><code>map ()</code> crea una lista.</li>
<li><code>map_lgl ()</code> crea un vector lógico.</li>
<li><code>map_int ()</code> crea un vector entero.</li>
<li><code>map_dbl ()</code> crea un vector doble.</li>
<li><code>map_chr ()</code> crea un vector de caracteres.</li>
</ul>
<p>Cada función toma un vector como entrada, aplica una función a cada elemento y luego devuelve un nuevo vector que tiene la misma longitud (y tiene los mismos nombres) que la entrada. El tipo de vector está determinado por el sufijo de la función <em>map</em>.</p>
<p>Una vez que domines estas funciones, descubrirás que lleva mucho menos tiempo resolver los problemas de iteración. Pero nunca debes sentirse mal por usar un bucle for en lugar de una función de mapeo. Las funciones de mapeo son un nivel superior de abstracción, y puede llevar mucho tiempo entender cómo funcionan. Lo importante es que resuelvas el problema en el que estás trabajando, no que escribas el código más conciso y elegante (¡aunque eso es definitivamente algo hacia lo que quieres llegar!).</p>
<p>Algunas personas te dirán que evites los bucles porque son lentos. ¡Están equivocados! (Bueno, al menos están bastante desactualizados, ya que los bucles han dejado de ser lentos desde hace muchos años). Los principales beneficios de usar funciones como <code>map ()</code> no es la velocidad, sino la claridad: hacen que tu código sea más fácil de escribir y leer.</p>
<p>Podemos usar estas funciones para realizar los mismos cálculos que el último bucle for. Esas funciones de resumen devolvían valores decimales, por lo que necesitamos usar <code>map_dbl ()</code>:</p>
<div class="sourceCode" id="cb585"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb585-1" data-line-number="1"><span class="kw">map_dbl</span>(df, mean)</a>
<a class="sourceLine" id="cb585-2" data-line-number="2"><span class="co">#&gt;      a      b      c      d </span></a>
<a class="sourceLine" id="cb585-3" data-line-number="3"><span class="co">#&gt; -0.326  0.136  0.429 -0.250</span></a>
<a class="sourceLine" id="cb585-4" data-line-number="4"><span class="kw">map_dbl</span>(df, median)</a>
<a class="sourceLine" id="cb585-5" data-line-number="5"><span class="co">#&gt;       a       b       c       d </span></a>
<a class="sourceLine" id="cb585-6" data-line-number="6"><span class="co">#&gt; -0.5185  0.0278  0.1730 -0.6116</span></a>
<a class="sourceLine" id="cb585-7" data-line-number="7"><span class="kw">map_dbl</span>(df, sd)</a>
<a class="sourceLine" id="cb585-8" data-line-number="8"><span class="co">#&gt;     a     b     c     d </span></a>
<a class="sourceLine" id="cb585-9" data-line-number="9"><span class="co">#&gt; 0.921 0.485 0.982 1.156</span></a></code></pre></div>
<p>Comparado con el uso de un bucle for, el foco está en la operación que se está realizando (es decir, <code>mean ()</code>, <code>median ()</code>, <code>sd ()</code>), y no en llevar la cuenta de las acciones requeridas para recorrer cada elemento y almacenar la salida. Esto es aún más evidente si usamos el <em>pipe</em>:</p>
<div class="sourceCode" id="cb586"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb586-1" data-line-number="1">df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">map_dbl</span>(mean)</a>
<a class="sourceLine" id="cb586-2" data-line-number="2"><span class="co">#&gt;      a      b      c      d </span></a>
<a class="sourceLine" id="cb586-3" data-line-number="3"><span class="co">#&gt; -0.326  0.136  0.429 -0.250</span></a>
<a class="sourceLine" id="cb586-4" data-line-number="4">df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">map_dbl</span>(median)</a>
<a class="sourceLine" id="cb586-5" data-line-number="5"><span class="co">#&gt;       a       b       c       d </span></a>
<a class="sourceLine" id="cb586-6" data-line-number="6"><span class="co">#&gt; -0.5185  0.0278  0.1730 -0.6116</span></a>
<a class="sourceLine" id="cb586-7" data-line-number="7">df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">map_dbl</span>(sd)</a>
<a class="sourceLine" id="cb586-8" data-line-number="8"><span class="co">#&gt;     a     b     c     d </span></a>
<a class="sourceLine" id="cb586-9" data-line-number="9"><span class="co">#&gt; 0.921 0.485 0.982 1.156</span></a></code></pre></div>
<p>Existen algunas diferencias entre <code>map _ * ()</code> y <code>col_summary ()</code>:</p>
<ul>
<li><p>Todas las funciones de purrr están implementadas en C. Esto las hace más
rápidas a expensas de la legibilidad.</p></li>
<li><p>El segundo argumento, <code>.f</code>, de la función a aplicar, puede ser una fórmula,
un vector de caracteres, o un vector de enteros. Aprenderás acerca de estos
atajos en la sección siguiente.</p></li>
<li><p><code>map_*()</code> usa … ([dot dot dot]) para pasar los argumentos adicionales a <code>.f</code>
cada vez que se llama:</p>
<div class="sourceCode" id="cb587"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb587-1" data-line-number="1"><span class="kw">map_dbl</span>(df, mean, <span class="dt">trim =</span> <span class="fl">0.5</span>)</a>
<a class="sourceLine" id="cb587-2" data-line-number="2"><span class="co">#&gt;       a       b       c       d </span></a>
<a class="sourceLine" id="cb587-3" data-line-number="3"><span class="co">#&gt; -0.5185  0.0278  0.1730 -0.6116</span></a></code></pre></div></li>
<li><p>Las funciones map también preservan los nombres:</p>
<div class="sourceCode" id="cb588"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb588-1" data-line-number="1">z &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">x =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="dt">y =</span> <span class="dv">4</span><span class="op">:</span><span class="dv">5</span>)</a>
<a class="sourceLine" id="cb588-2" data-line-number="2"><span class="kw">map_int</span>(z, length)</a>
<a class="sourceLine" id="cb588-3" data-line-number="3"><span class="co">#&gt; x y </span></a>
<a class="sourceLine" id="cb588-4" data-line-number="4"><span class="co">#&gt; 3 2</span></a></code></pre></div></li>
</ul>
<div id="atajos" class="section level3">
<h3><span class="header-section-number">21.5.1</span> Atajos</h3>
<p>Existen algunos atajos que puedes usar con <code>.f</code> para ahorrar algo de escritura. Imagina que quieres ajustar un modelo lineal a cada grupo en un conjunto de datos. El siguiente ejemplo de juguete divide el dataset <code>mtautos</code> en tres partes (una para cada valor de cilindro) y ajusta el mismo modelo lineal a cada parte:</p>
<div class="sourceCode" id="cb589"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb589-1" data-line-number="1">models &lt;-<span class="st"> </span>mtautos <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb589-2" data-line-number="2"><span class="st">  </span><span class="kw">split</span>(.<span class="op">$</span>cilindros) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb589-3" data-line-number="3"><span class="st">  </span><span class="kw">map</span>(<span class="cf">function</span>(df) <span class="kw">lm</span>(millas <span class="op">~</span><span class="st"> </span>peso, <span class="dt">data =</span> df))</a></code></pre></div>
<p>La sintaxis para crear una función anónima en R es bastante detallada, por lo que purrr provee un atajo conveniente: una fórmula unidireccional.</p>
<div class="sourceCode" id="cb590"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb590-1" data-line-number="1">modelos &lt;-<span class="st"> </span>mtautos <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb590-2" data-line-number="2"><span class="st">  </span><span class="kw">split</span>(.<span class="op">$</span>cilindros) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb590-3" data-line-number="3"><span class="st">  </span><span class="kw">map</span>(<span class="op">~</span><span class="kw">lm</span>(millas <span class="op">~</span><span class="st"> </span>peso, <span class="dt">data =</span> .))</a></code></pre></div>
<p>Hemos usado <code>.</code> como pronombre: se refiere al elemento actual de la lista (del mismo modo que <code>i</code> se refiere al índice actual en el loop for).</p>
<p>Cuando examinas múltiples modelos, puedes querer extraer un estadístico resumen como lo es <span class="math inline">\(R^2\)</span>. Para hacer eso primero necesitas correr <code>summary()</code> y luego extraer la componente <code>r.squared</code> (R-cuadrado). Podríamos hacerlo usando un atajo para las funciones anónimas:</p>
<div class="sourceCode" id="cb591"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb591-1" data-line-number="1">modelos <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb591-2" data-line-number="2"><span class="st">  </span><span class="kw">map</span>(summary) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb591-3" data-line-number="3"><span class="st">  </span><span class="kw">map_dbl</span>(<span class="op">~</span>.<span class="op">$</span>r.squared)</a>
<a class="sourceLine" id="cb591-4" data-line-number="4"><span class="co">#&gt;     4     6     8 </span></a>
<a class="sourceLine" id="cb591-5" data-line-number="5"><span class="co">#&gt; 0.509 0.465 0.423</span></a></code></pre></div>
<p>Pero extraer las componentes con nombres es una operación común, por lo tanto purrr provee un atajo más corto: puedes usar una string.</p>
<div class="sourceCode" id="cb592"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb592-1" data-line-number="1">modelos <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb592-2" data-line-number="2"><span class="st">  </span><span class="kw">map</span>(summary) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb592-3" data-line-number="3"><span class="st">  </span><span class="kw">map_dbl</span>(<span class="st">&quot;r.squared&quot;</span>)</a>
<a class="sourceLine" id="cb592-4" data-line-number="4"><span class="co">#&gt;     4     6     8 </span></a>
<a class="sourceLine" id="cb592-5" data-line-number="5"><span class="co">#&gt; 0.509 0.465 0.423</span></a></code></pre></div>
<p>También puedes usar un entero para seleccionar elementos de acuerdo a su posición:</p>
<div class="sourceCode" id="cb593"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb593-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="kw">list</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>), <span class="kw">list</span>(<span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>), <span class="kw">list</span>(<span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>))</a>
<a class="sourceLine" id="cb593-2" data-line-number="2">x <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">map_dbl</span>(<span class="dv">2</span>)</a>
<a class="sourceLine" id="cb593-3" data-line-number="3"><span class="co">#&gt; [1] 2 5 8</span></a></code></pre></div>
</div>
<div id="r-base" class="section level3">
<h3><span class="header-section-number">21.5.2</span> R Base</h3>
<p>Si estás familiarizado con la familia de funciones apply en R base, podrás haber notado algunas similitudes con las funciones de purrr:</p>
<ul>
<li><p><code>lapply()</code> es básicamente idéntica a <code>map()</code>, excepto que <code>map()</code> es consistente
con todas las otras funciones de purrr y puedes usar atajos para <code>.f</code>.</p></li>
<li><p><code>sapply()</code> de base es una envolvente de <code>lapply()</code> que automáticamente
simplifica la salida. Esto es útilpara el trabajo interactivo pero es
problemático en una función ya que nunca sabrás que tipo de salida
vas a obtener:</p>
<div class="sourceCode" id="cb594"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb594-1" data-line-number="1">x1 &lt;-<span class="st"> </span><span class="kw">list</span>(</a>
<a class="sourceLine" id="cb594-2" data-line-number="2">  <span class="kw">c</span>(<span class="fl">0.27</span>, <span class="fl">0.37</span>, <span class="fl">0.57</span>, <span class="fl">0.91</span>, <span class="fl">0.20</span>),</a>
<a class="sourceLine" id="cb594-3" data-line-number="3">  <span class="kw">c</span>(<span class="fl">0.90</span>, <span class="fl">0.94</span>, <span class="fl">0.66</span>, <span class="fl">0.63</span>, <span class="fl">0.06</span>), </a>
<a class="sourceLine" id="cb594-4" data-line-number="4">  <span class="kw">c</span>(<span class="fl">0.21</span>, <span class="fl">0.18</span>, <span class="fl">0.69</span>, <span class="fl">0.38</span>, <span class="fl">0.77</span>)</a>
<a class="sourceLine" id="cb594-5" data-line-number="5">)</a>
<a class="sourceLine" id="cb594-6" data-line-number="6">x2 &lt;-<span class="st"> </span><span class="kw">list</span>(</a>
<a class="sourceLine" id="cb594-7" data-line-number="7">  <span class="kw">c</span>(<span class="fl">0.50</span>, <span class="fl">0.72</span>, <span class="fl">0.99</span>, <span class="fl">0.38</span>, <span class="fl">0.78</span>), </a>
<a class="sourceLine" id="cb594-8" data-line-number="8">  <span class="kw">c</span>(<span class="fl">0.93</span>, <span class="fl">0.21</span>, <span class="fl">0.65</span>, <span class="fl">0.13</span>, <span class="fl">0.27</span>), </a>
<a class="sourceLine" id="cb594-9" data-line-number="9">  <span class="kw">c</span>(<span class="fl">0.39</span>, <span class="fl">0.01</span>, <span class="fl">0.38</span>, <span class="fl">0.87</span>, <span class="fl">0.34</span>)</a>
<a class="sourceLine" id="cb594-10" data-line-number="10">)</a>
<a class="sourceLine" id="cb594-11" data-line-number="11"></a>
<a class="sourceLine" id="cb594-12" data-line-number="12">threshold &lt;-<span class="st"> </span><span class="cf">function</span>(x, <span class="dt">cutoff =</span> <span class="fl">0.8</span>) x[x <span class="op">&gt;</span><span class="st"> </span>cutoff]</a>
<a class="sourceLine" id="cb594-13" data-line-number="13">x1 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">sapply</span>(threshold) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">str</span>()</a>
<a class="sourceLine" id="cb594-14" data-line-number="14"><span class="co">#&gt; List of 3</span></a>
<a class="sourceLine" id="cb594-15" data-line-number="15"><span class="co">#&gt;  $ : num 0.91</span></a>
<a class="sourceLine" id="cb594-16" data-line-number="16"><span class="co">#&gt;  $ : num [1:2] 0.9 0.94</span></a>
<a class="sourceLine" id="cb594-17" data-line-number="17"><span class="co">#&gt;  $ : num(0)</span></a>
<a class="sourceLine" id="cb594-18" data-line-number="18">x2 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">sapply</span>(threshold) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">str</span>()</a>
<a class="sourceLine" id="cb594-19" data-line-number="19"><span class="co">#&gt;  num [1:3] 0.99 0.93 0.87</span></a></code></pre></div></li>
<li><p><code>vapply()</code> es una alternativa más segura a <code>sapply()</code> porque debes
ingresar un argumento adicional que define el tipo. El único problema con
<code>vapply()</code> es es que requiere mucha escritura:
<code>vapply(df, is.numeric, logical(1))</code> es equivalente a <code>map_lgl(df, is.numeric)</code>.
Una ventaja de <code>vapply()</code> sobre las funciones map de purrr, es que también
puede generar matrices — las funciones map sólo generan vectores.</p></li>
</ul>
<p>Aquí nos enfocamos en las funciones de purrr ya que proveen nombres y argumentos consistentes, atajos útiles y en el futuro proveerán paralelización simple y barras de progreso.</p>
</div>
<div id="ejercicios-57" class="section level3">
<h3><span class="header-section-number">21.5.3</span> Ejercicios</h3>
<ol style="list-style-type: decimal">
<li><p>Escribe un código que use una de las funciones de map para:</p>
<ol style="list-style-type: decimal">
<li>Calcular la media de cada columna en <code>mautos</code>.</li>
<li>Obtener de que tipo es cada columna en <code>vuelos</code>.</li>
<li>Calcular la cantidad de valores únicos en cada columna de <code>iris</code>.</li>
<li>Generar diez normales aleatorias para cada <span class="math inline">\(\mu = -10\)</span>, <span class="math inline">\(0\)</span>, <span class="math inline">\(10\)</span>, and <span class="math inline">\(100\)</span>.</li>
</ol></li>
<li><p>¿Cómo puedes crear un vector tal que para cada columna en un cuadro de datos indique si
corresponde o no a un factor?</p></li>
<li><p>¿Qué ocurre si usas las funciones map en vectores que no son listas?
¿Qué hace <code>map(1:5, runif)</code>? ¿Por qué?</p></li>
<li><p>¿Qué hace <code>map(-2:2, rnorm, n = 5)</code>? ¿Por qué?
¿Qué hace <code>map_dbl(-2:2, rnorm, n = 5)</code>? ¿Por qué?</p></li>
<li><p>Reescribe <code>map(x, function(df) lm(mpg ~ wt, data = df))</code> para eliminar
todas las funciones anónimas.</p></li>
</ol>
</div>
</div>
<div id="manejando-los-errores" class="section level2">
<h2><span class="header-section-number">21.6</span> Manejando los errores</h2>
<p>Cuando usas las funciones map para repetir muchas operaciones, la probabilidad de que una de las operaciones falle es mucho más alta. Cuando esto ocurre, obtendrás un mensaje de error y no una salida. Esto es molesto: ¿Por qué un error evita que accedas a todo lo que funcionó? ¿Cómo te aseguras de que una manzana podrida no arruine todo el barril?</p>
<p>En esta sección aprenderás a manejar estas situaciones con una nueva función: <code>safely()</code>. <code>safely()</code> es un adverbio: toma una función (un verbo) y entrega una versión modificada. En este caso, la función modificada nunca lanzará un error. En cambio, siempre devolverá una lista de dos elementos:</p>
<ol style="list-style-type: decimal">
<li><p><code>result</code> es el resultado original. Si hubo un error, aparecerá como <code>NULL</code>,</p></li>
<li><p><code>error</code> es un objeto de error. Si la operación fue exitosa, será <code>NULL</code>.</p></li>
</ol>
<p>(Puede que estés familiarizado con la función <code>try()</code> de R base. Es similar, pero dado que a veces entrega el resultado original y a veces un objeto de error, es más díficil para trabajar.)</p>
<p>Veamos esto con un ejemplo simple: <code>log()</code>:</p>
<div class="sourceCode" id="cb595"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb595-1" data-line-number="1">safe_log &lt;-<span class="st"> </span><span class="kw">safely</span>(log)</a>
<a class="sourceLine" id="cb595-2" data-line-number="2"><span class="kw">str</span>(<span class="kw">safe_log</span>(<span class="dv">10</span>))</a>
<a class="sourceLine" id="cb595-3" data-line-number="3"><span class="co">#&gt; List of 2</span></a>
<a class="sourceLine" id="cb595-4" data-line-number="4"><span class="co">#&gt;  $ result: num 2.3</span></a>
<a class="sourceLine" id="cb595-5" data-line-number="5"><span class="co">#&gt;  $ error : NULL</span></a>
<a class="sourceLine" id="cb595-6" data-line-number="6"><span class="kw">str</span>(<span class="kw">safe_log</span>(<span class="st">&quot;a&quot;</span>))</a>
<a class="sourceLine" id="cb595-7" data-line-number="7"><span class="co">#&gt; List of 2</span></a>
<a class="sourceLine" id="cb595-8" data-line-number="8"><span class="co">#&gt;  $ result: NULL</span></a>
<a class="sourceLine" id="cb595-9" data-line-number="9"><span class="co">#&gt;  $ error :List of 2</span></a>
<a class="sourceLine" id="cb595-10" data-line-number="10"><span class="co">#&gt;   ..$ message: chr &quot;non-numeric argument to mathematical function&quot;</span></a>
<a class="sourceLine" id="cb595-11" data-line-number="11"><span class="co">#&gt;   ..$ call   : language .Primitive(&quot;log&quot;)(x, base)</span></a>
<a class="sourceLine" id="cb595-12" data-line-number="12"><span class="co">#&gt;   ..- attr(*, &quot;class&quot;)= chr [1:3] &quot;simpleError&quot; &quot;error&quot; &quot;condition&quot;</span></a></code></pre></div>
<p>Cuando la función es exitosa, el elemento <code>result</code> contiene el resultado y el elemento <code>error</code> es <code>NULL</code>. Cuando la función falla, el elemento <code>result</code> es <code>NULL</code> y el elemento <code>error</code> contiene un objeto de error.</p>
<p><code>safely()</code> está diseñada para funcionar con map:</p>
<div class="sourceCode" id="cb596"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb596-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dv">1</span>, <span class="dv">10</span>, <span class="st">&quot;a&quot;</span>)</a>
<a class="sourceLine" id="cb596-2" data-line-number="2">y &lt;-<span class="st"> </span>x <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">map</span>(<span class="kw">safely</span>(log))</a>
<a class="sourceLine" id="cb596-3" data-line-number="3"><span class="kw">str</span>(y)</a>
<a class="sourceLine" id="cb596-4" data-line-number="4"><span class="co">#&gt; List of 3</span></a>
<a class="sourceLine" id="cb596-5" data-line-number="5"><span class="co">#&gt;  $ :List of 2</span></a>
<a class="sourceLine" id="cb596-6" data-line-number="6"><span class="co">#&gt;   ..$ result: num 0</span></a>
<a class="sourceLine" id="cb596-7" data-line-number="7"><span class="co">#&gt;   ..$ error : NULL</span></a>
<a class="sourceLine" id="cb596-8" data-line-number="8"><span class="co">#&gt;  $ :List of 2</span></a>
<a class="sourceLine" id="cb596-9" data-line-number="9"><span class="co">#&gt;   ..$ result: num 2.3</span></a>
<a class="sourceLine" id="cb596-10" data-line-number="10"><span class="co">#&gt;   ..$ error : NULL</span></a>
<a class="sourceLine" id="cb596-11" data-line-number="11"><span class="co">#&gt;  $ :List of 2</span></a>
<a class="sourceLine" id="cb596-12" data-line-number="12"><span class="co">#&gt;   ..$ result: NULL</span></a>
<a class="sourceLine" id="cb596-13" data-line-number="13"><span class="co">#&gt;   ..$ error :List of 2</span></a>
<a class="sourceLine" id="cb596-14" data-line-number="14"><span class="co">#&gt;   .. ..$ message: chr &quot;non-numeric argument to mathematical function&quot;</span></a>
<a class="sourceLine" id="cb596-15" data-line-number="15"><span class="co">#&gt;   .. ..$ call   : language .Primitive(&quot;log&quot;)(x, base)</span></a>
<a class="sourceLine" id="cb596-16" data-line-number="16"><span class="co">#&gt;   .. ..- attr(*, &quot;class&quot;)= chr [1:3] &quot;simpleError&quot; &quot;error&quot; &quot;condition&quot;</span></a></code></pre></div>
<p>Esto sería más fácil de trabajar si tuvieramos dos listas: una con todos los errores y otra con todas las salidas, Esto es fácil de obtener con <code>purrr::transpose()</code>:</p>
<div class="sourceCode" id="cb597"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb597-1" data-line-number="1">y &lt;-<span class="st"> </span>y <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">transpose</span>()</a>
<a class="sourceLine" id="cb597-2" data-line-number="2"><span class="kw">str</span>(y)</a>
<a class="sourceLine" id="cb597-3" data-line-number="3"><span class="co">#&gt; List of 2</span></a>
<a class="sourceLine" id="cb597-4" data-line-number="4"><span class="co">#&gt;  $ result:List of 3</span></a>
<a class="sourceLine" id="cb597-5" data-line-number="5"><span class="co">#&gt;   ..$ : num 0</span></a>
<a class="sourceLine" id="cb597-6" data-line-number="6"><span class="co">#&gt;   ..$ : num 2.3</span></a>
<a class="sourceLine" id="cb597-7" data-line-number="7"><span class="co">#&gt;   ..$ : NULL</span></a>
<a class="sourceLine" id="cb597-8" data-line-number="8"><span class="co">#&gt;  $ error :List of 3</span></a>
<a class="sourceLine" id="cb597-9" data-line-number="9"><span class="co">#&gt;   ..$ : NULL</span></a>
<a class="sourceLine" id="cb597-10" data-line-number="10"><span class="co">#&gt;   ..$ : NULL</span></a>
<a class="sourceLine" id="cb597-11" data-line-number="11"><span class="co">#&gt;   ..$ :List of 2</span></a>
<a class="sourceLine" id="cb597-12" data-line-number="12"><span class="co">#&gt;   .. ..$ message: chr &quot;non-numeric argument to mathematical function&quot;</span></a>
<a class="sourceLine" id="cb597-13" data-line-number="13"><span class="co">#&gt;   .. ..$ call   : language .Primitive(&quot;log&quot;)(x, base)</span></a>
<a class="sourceLine" id="cb597-14" data-line-number="14"><span class="co">#&gt;   .. ..- attr(*, &quot;class&quot;)= chr [1:3] &quot;simpleError&quot; &quot;error&quot; &quot;condition&quot;</span></a></code></pre></div>
<p>Queda a tu criterio como manejar los errores, pero típicamente puedes mirar los valores de <code>x</code> donde <code>y</code> es un error, o trabajar con los valores que <code>y</code> que están ok:</p>
<div class="sourceCode" id="cb598"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb598-1" data-line-number="1">is_ok &lt;-<span class="st"> </span>y<span class="op">$</span>error <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">map_lgl</span>(is_null)</a>
<a class="sourceLine" id="cb598-2" data-line-number="2">x[<span class="op">!</span>is_ok]</a>
<a class="sourceLine" id="cb598-3" data-line-number="3"><span class="co">#&gt; [[1]]</span></a>
<a class="sourceLine" id="cb598-4" data-line-number="4"><span class="co">#&gt; [1] &quot;a&quot;</span></a>
<a class="sourceLine" id="cb598-5" data-line-number="5">y<span class="op">$</span>result[is_ok] <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">flatten_dbl</span>()</a>
<a class="sourceLine" id="cb598-6" data-line-number="6"><span class="co">#&gt; [1] 0.0 2.3</span></a></code></pre></div>
<p>Purrr provee otros dos adverbios utiles:</p>
<ul>
<li><p>Como <code>safely()</code>, <code>possibly()</code> siempre da éxito. Es más simple que <code>safely()</code>,
ya que le das un valor por defecto para devolver cuando hay un error.</p>
<div class="sourceCode" id="cb599"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb599-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dv">1</span>, <span class="dv">10</span>, <span class="st">&quot;a&quot;</span>)</a>
<a class="sourceLine" id="cb599-2" data-line-number="2">x <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">map_dbl</span>(<span class="kw">possibly</span>(log, <span class="ot">NA_real_</span>))</a>
<a class="sourceLine" id="cb599-3" data-line-number="3"><span class="co">#&gt; [1] 0.0 2.3  NA</span></a></code></pre></div></li>
<li><p><code>quietly()</code> tiene un rol similar a <code>safely()</code>, pero en lugar de capturar
los errores, captura la salida impresa, mensajes y advertencias:</p>
<div class="sourceCode" id="cb600"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb600-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dv">1</span>, <span class="dv">-1</span>)</a>
<a class="sourceLine" id="cb600-2" data-line-number="2">x <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">map</span>(<span class="kw">quietly</span>(log)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">str</span>()</a>
<a class="sourceLine" id="cb600-3" data-line-number="3"><span class="co">#&gt; List of 2</span></a>
<a class="sourceLine" id="cb600-4" data-line-number="4"><span class="co">#&gt;  $ :List of 4</span></a>
<a class="sourceLine" id="cb600-5" data-line-number="5"><span class="co">#&gt;   ..$ result  : num 0</span></a>
<a class="sourceLine" id="cb600-6" data-line-number="6"><span class="co">#&gt;   ..$ output  : chr &quot;&quot;</span></a>
<a class="sourceLine" id="cb600-7" data-line-number="7"><span class="co">#&gt;   ..$ warnings: chr(0) </span></a>
<a class="sourceLine" id="cb600-8" data-line-number="8"><span class="co">#&gt;   ..$ messages: chr(0) </span></a>
<a class="sourceLine" id="cb600-9" data-line-number="9"><span class="co">#&gt;  $ :List of 4</span></a>
<a class="sourceLine" id="cb600-10" data-line-number="10"><span class="co">#&gt;   ..$ result  : num NaN</span></a>
<a class="sourceLine" id="cb600-11" data-line-number="11"><span class="co">#&gt;   ..$ output  : chr &quot;&quot;</span></a>
<a class="sourceLine" id="cb600-12" data-line-number="12"><span class="co">#&gt;   ..$ warnings: chr &quot;NaNs produced&quot;</span></a>
<a class="sourceLine" id="cb600-13" data-line-number="13"><span class="co">#&gt;   ..$ messages: chr(0)</span></a></code></pre></div></li>
</ul>
</div>
<div id="mapear-sobre-multiples-argumentos" class="section level2">
<h2><span class="header-section-number">21.7</span> Mapear sobre múltiples argumentos</h2>
<p>Hasta ahora hemos mapeado sobre una única entrada. Pero a menudo tienes multiples entradas relacionadas y necesitas iterar sobre ellas en paralelo. Ese es el trabajo de las funciones <code>map2()</code> and <code>pmap()</code>. Por ejemplo, imagina que debes simular normales aleatorias con distintas medias. Ya sabes hacerlo con <code>map()</code>:</p>
<div class="sourceCode" id="cb601"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb601-1" data-line-number="1">mu &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dv">5</span>, <span class="dv">10</span>, <span class="dv">-3</span>)</a>
<a class="sourceLine" id="cb601-2" data-line-number="2">mu <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb601-3" data-line-number="3"><span class="st">  </span><span class="kw">map</span>(rnorm, <span class="dt">n =</span> <span class="dv">5</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb601-4" data-line-number="4"><span class="st">  </span><span class="kw">str</span>()</a>
<a class="sourceLine" id="cb601-5" data-line-number="5"><span class="co">#&gt; List of 3</span></a>
<a class="sourceLine" id="cb601-6" data-line-number="6"><span class="co">#&gt;  $ : num [1:5] 5.63 7.1 4.39 3.37 4.99</span></a>
<a class="sourceLine" id="cb601-7" data-line-number="7"><span class="co">#&gt;  $ : num [1:5] 9.34 9.33 9.52 11.32 10.64</span></a>
<a class="sourceLine" id="cb601-8" data-line-number="8"><span class="co">#&gt;  $ : num [1:5] -2.49 -4.75 -2.11 -2.78 -2.42</span></a></code></pre></div>
<p>¿Qué ocurre si también necesitas cambiar la desviación estándar? Una forma de hacerlo sería iterar sobre los índices e indexar en vectores de medias y desviaciones estándar:</p>
<div class="sourceCode" id="cb602"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb602-1" data-line-number="1">sigma &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb602-2" data-line-number="2"><span class="kw">seq_along</span>(mu) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb602-3" data-line-number="3"><span class="st">  </span><span class="kw">map</span>(<span class="op">~</span><span class="kw">rnorm</span>(<span class="dv">5</span>, mu[[.]], sigma[[.]])) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb602-4" data-line-number="4"><span class="st">  </span><span class="kw">str</span>()</a>
<a class="sourceLine" id="cb602-5" data-line-number="5"><span class="co">#&gt; List of 3</span></a>
<a class="sourceLine" id="cb602-6" data-line-number="6"><span class="co">#&gt;  $ : num [1:5] 4.82 5.74 4 2.06 5.72</span></a>
<a class="sourceLine" id="cb602-7" data-line-number="7"><span class="co">#&gt;  $ : num [1:5] 6.51 0.529 10.381 14.377 12.269</span></a>
<a class="sourceLine" id="cb602-8" data-line-number="8"><span class="co">#&gt;  $ : num [1:5] -11.51 2.66 8.52 -10.56 -7.89</span></a></code></pre></div>
<p>Pero esto oscurece la intención del código. En su lugar podríamos usar <code>map2()</code> que itera sobre dos vectores en paralelo:</p>
<div class="sourceCode" id="cb603"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb603-1" data-line-number="1"><span class="kw">map2</span>(mu, sigma, rnorm, <span class="dt">n =</span> <span class="dv">5</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">str</span>()</a>
<a class="sourceLine" id="cb603-2" data-line-number="2"><span class="co">#&gt; List of 3</span></a>
<a class="sourceLine" id="cb603-3" data-line-number="3"><span class="co">#&gt;  $ : num [1:5] 3.83 4.52 5.12 3.23 3.59</span></a>
<a class="sourceLine" id="cb603-4" data-line-number="4"><span class="co">#&gt;  $ : num [1:5] 13.55 3.8 8.16 12.31 8.39</span></a>
<a class="sourceLine" id="cb603-5" data-line-number="5"><span class="co">#&gt;  $ : num [1:5] -15.872 -13.3 12.141 0.469 14.794</span></a></code></pre></div>
<p><code>map2()</code> genera esta serie de llamadas a funciones:</p>
<p><img src="diagrams_w_text_as_path/lists-map2.svg" width="70%" style="display: block; margin: auto;" /></p>
<p>Observa que los argumentos que varían para cada llamada van <em>antes</em> de la función; argumentos que son los mismos para cada llamada van <em>después</em>.</p>
<p>Al igual que <code>map()</code>, <code>map2()</code> es una envolvente en torno a un loop for:</p>
<div class="sourceCode" id="cb604"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb604-1" data-line-number="1">map2 &lt;-<span class="st"> </span><span class="cf">function</span>(x, y, f, ...) {</a>
<a class="sourceLine" id="cb604-2" data-line-number="2">  out &lt;-<span class="st"> </span><span class="kw">vector</span>(<span class="st">&quot;list&quot;</span>, <span class="kw">length</span>(x))</a>
<a class="sourceLine" id="cb604-3" data-line-number="3">  <span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">seq_along</span>(x)) {</a>
<a class="sourceLine" id="cb604-4" data-line-number="4">    out[[i]] &lt;-<span class="st"> </span><span class="kw">f</span>(x[[i]], y[[i]], ...)</a>
<a class="sourceLine" id="cb604-5" data-line-number="5">  }</a>
<a class="sourceLine" id="cb604-6" data-line-number="6">  out</a>
<a class="sourceLine" id="cb604-7" data-line-number="7">}</a></code></pre></div>
<p>También te podrás imaginar <code>map3()</code>, <code>map4()</code>, <code>map5()</code>, <code>map6()</code> etc, pero eso se vuelve tedioso rápidamente. En cambio, purrr provee <code>pmap()</code> que toma una lista de argumentos. Puedes usar eso si quieres cambiar la media, desviación estándar y el número de muestras:</p>
<div class="sourceCode" id="cb605"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb605-1" data-line-number="1">n &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb605-2" data-line-number="2">args1 &lt;-<span class="st"> </span><span class="kw">list</span>(n, mu, sigma)</a>
<a class="sourceLine" id="cb605-3" data-line-number="3">args1 <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb605-4" data-line-number="4"><span class="st">  </span><span class="kw">pmap</span>(rnorm) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb605-5" data-line-number="5"><span class="st">  </span><span class="kw">str</span>()</a>
<a class="sourceLine" id="cb605-6" data-line-number="6"><span class="co">#&gt; List of 3</span></a>
<a class="sourceLine" id="cb605-7" data-line-number="7"><span class="co">#&gt;  $ : num 5.39</span></a>
<a class="sourceLine" id="cb605-8" data-line-number="8"><span class="co">#&gt;  $ : num [1:3] 5.41 2.08 9.58</span></a>
<a class="sourceLine" id="cb605-9" data-line-number="9"><span class="co">#&gt;  $ : num [1:5] -23.85 -2.96 -6.56 8.46 -5.21</span></a></code></pre></div>
<p>Esto se ve así:</p>
<p><img src="diagrams_w_text_as_path/lists-pmap-unnamed.svg" width="70%" style="display: block; margin: auto;" /></p>
<p>Si no quieres nombrar todos los elementos de la lista, <code>pmap()</code> usará una coincidencia posicional al llamar a la función. Esto es un poco frágil y hace el código más difícil de entender, por lo que es mejor nombrar los argumentos:</p>
<div class="sourceCode" id="cb606"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb606-1" data-line-number="1">args2 &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">mean =</span> mu, <span class="dt">sd =</span> sigma, <span class="dt">n =</span> n)</a>
<a class="sourceLine" id="cb606-2" data-line-number="2">args2 <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb606-3" data-line-number="3"><span class="st">  </span><span class="kw">pmap</span>(rnorm) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb606-4" data-line-number="4"><span class="st">  </span><span class="kw">str</span>()</a></code></pre></div>
<p>Esto genera llamadas más largas, pero más seguras:</p>
<p><img src="diagrams/lists-pmap-named.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Dado que los argumentos son todos del mismo largo, tiene sentido almacenarlos en un data frame:</p>
<div class="sourceCode" id="cb607"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb607-1" data-line-number="1">params &lt;-<span class="st"> </span><span class="kw">tribble</span>(</a>
<a class="sourceLine" id="cb607-2" data-line-number="2">  <span class="op">~</span>mean, <span class="op">~</span>sd, <span class="op">~</span>n,</a>
<a class="sourceLine" id="cb607-3" data-line-number="3">    <span class="dv">5</span>,     <span class="dv">1</span>,  <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb607-4" data-line-number="4">   <span class="dv">10</span>,     <span class="dv">5</span>,  <span class="dv">3</span>,</a>
<a class="sourceLine" id="cb607-5" data-line-number="5">   <span class="dv">-3</span>,    <span class="dv">10</span>,  <span class="dv">5</span></a>
<a class="sourceLine" id="cb607-6" data-line-number="6">)</a>
<a class="sourceLine" id="cb607-7" data-line-number="7">params <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb607-8" data-line-number="8"><span class="st">  </span><span class="kw">pmap</span>(rnorm)</a>
<a class="sourceLine" id="cb607-9" data-line-number="9"><span class="co">#&gt; [[1]]</span></a>
<a class="sourceLine" id="cb607-10" data-line-number="10"><span class="co">#&gt; [1] 6.02</span></a>
<a class="sourceLine" id="cb607-11" data-line-number="11"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb607-12" data-line-number="12"><span class="co">#&gt; [[2]]</span></a>
<a class="sourceLine" id="cb607-13" data-line-number="13"><span class="co">#&gt; [1]  8.68 18.29  6.13</span></a>
<a class="sourceLine" id="cb607-14" data-line-number="14"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb607-15" data-line-number="15"><span class="co">#&gt; [[3]]</span></a>
<a class="sourceLine" id="cb607-16" data-line-number="16"><span class="co">#&gt; [1] -12.24  -5.76  -8.93  -4.22   8.80</span></a></code></pre></div>
<p>En cuanto el código se vuelva complicado, creemos que un data frame es una aproximación ya que se asegura de que cada columna tenga nombre y el mismo largo que las demás columnas.</p>
<div id="llamando-distintas-funciones" class="section level3">
<h3><span class="header-section-number">21.7.1</span> Llamando distintas funciones</h3>
<p>Existe un paso adicional en complejidad - así como cambias los argumentos de la función también puedes cambiar la función misma:</p>
<div class="sourceCode" id="cb608"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb608-1" data-line-number="1">f &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;runif&quot;</span>, <span class="st">&quot;rnorm&quot;</span>, <span class="st">&quot;rpois&quot;</span>)</a>
<a class="sourceLine" id="cb608-2" data-line-number="2">param &lt;-<span class="st"> </span><span class="kw">list</span>(</a>
<a class="sourceLine" id="cb608-3" data-line-number="3">  <span class="kw">list</span>(<span class="dt">min =</span> <span class="dv">-1</span>, <span class="dt">max =</span> <span class="dv">1</span>), </a>
<a class="sourceLine" id="cb608-4" data-line-number="4">  <span class="kw">list</span>(<span class="dt">sd =</span> <span class="dv">5</span>), </a>
<a class="sourceLine" id="cb608-5" data-line-number="5">  <span class="kw">list</span>(<span class="dt">lambda =</span> <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb608-6" data-line-number="6">)</a></code></pre></div>
<p>Para manejar esto, puedes usar <code>invoke_map()</code>:</p>
<div class="sourceCode" id="cb609"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb609-1" data-line-number="1"><span class="kw">invoke_map</span>(f, param, <span class="dt">n =</span> <span class="dv">5</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">str</span>()</a>
<a class="sourceLine" id="cb609-2" data-line-number="2"><span class="co">#&gt; List of 3</span></a>
<a class="sourceLine" id="cb609-3" data-line-number="3"><span class="co">#&gt;  $ : num [1:5] 0.479 0.439 -0.471 0.348 -0.581</span></a>
<a class="sourceLine" id="cb609-4" data-line-number="4"><span class="co">#&gt;  $ : num [1:5] 2.48 3.9 7.54 -9.12 3.94</span></a>
<a class="sourceLine" id="cb609-5" data-line-number="5"><span class="co">#&gt;  $ : int [1:5] 6 11 5 8 9</span></a></code></pre></div>
<p><img src="diagrams/lists-invoke.png" style="display: block; margin: auto;" /></p>
<p>El primer argumento es una lista de funciones o vectores de caracteres de nombres de funciones. El segundo argumento es una lista de listas que entrega los argumentos que cambian en cada función. Los argumentos subsecuentes pasan a cada función.</p>
<p>Nuevamente, puedes usar <code>tribble()</code> para hacer que crear tuplas coincidentes sea un poco más fácil:</p>
<div class="sourceCode" id="cb610"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb610-1" data-line-number="1">sim &lt;-<span class="st"> </span><span class="kw">tribble</span>(</a>
<a class="sourceLine" id="cb610-2" data-line-number="2">  <span class="op">~</span>f,      <span class="op">~</span>params,</a>
<a class="sourceLine" id="cb610-3" data-line-number="3">  <span class="st">&quot;runif&quot;</span>, <span class="kw">list</span>(<span class="dt">min =</span> <span class="dv">-1</span>, <span class="dt">max =</span> <span class="dv">1</span>),</a>
<a class="sourceLine" id="cb610-4" data-line-number="4">  <span class="st">&quot;rnorm&quot;</span>, <span class="kw">list</span>(<span class="dt">sd =</span> <span class="dv">5</span>),</a>
<a class="sourceLine" id="cb610-5" data-line-number="5">  <span class="st">&quot;rpois&quot;</span>, <span class="kw">list</span>(<span class="dt">lambda =</span> <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb610-6" data-line-number="6">)</a>
<a class="sourceLine" id="cb610-7" data-line-number="7">sim <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb610-8" data-line-number="8"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">sim =</span> <span class="kw">invoke_map</span>(f, params, <span class="dt">n =</span> <span class="dv">10</span>))</a></code></pre></div>
</div>
</div>
<div id="walk" class="section level2">
<h2><span class="header-section-number">21.8</span> Walk</h2>
<p>Walk es una alternativa a map que puedes usar cuando quieres llamar a una función por sus efectos colaterales, por sobre el valor entregado. Típicamente hacemos esto cuando queremos mostrar la salida en pantalla o escribir archivos al disco - lo importante es la acción, no el valor resultante. Aquí hay un ejemplo simple:</p>
<div class="sourceCode" id="cb611"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb611-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dv">1</span>, <span class="st">&quot;a&quot;</span>, <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb611-2" data-line-number="2"></a>
<a class="sourceLine" id="cb611-3" data-line-number="3">x <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb611-4" data-line-number="4"><span class="st">  </span><span class="kw">walk</span>(print)</a>
<a class="sourceLine" id="cb611-5" data-line-number="5"><span class="co">#&gt; [1] 1</span></a>
<a class="sourceLine" id="cb611-6" data-line-number="6"><span class="co">#&gt; [1] &quot;a&quot;</span></a>
<a class="sourceLine" id="cb611-7" data-line-number="7"><span class="co">#&gt; [1] 3</span></a></code></pre></div>
<p><code>walk()</code> no es generalmente útil si se compara con <code>walk2()</code> o <code>pwalk()</code>. Por ejemplo, si tienes una lista de gráficos y un vector con nombres de archivos, puedes usar <code>pwalk()</code> para guardar cada archivo en su ubicación correspondiente en el disco:</p>
<div class="sourceCode" id="cb612"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb612-1" data-line-number="1"><span class="kw">library</span>(ggplot2)</a>
<a class="sourceLine" id="cb612-2" data-line-number="2">plots &lt;-<span class="st"> </span>mtcars <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb612-3" data-line-number="3"><span class="st">  </span><span class="kw">split</span>(.<span class="op">$</span>cyl) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb612-4" data-line-number="4"><span class="st">  </span><span class="kw">map</span>(<span class="op">~</span><span class="kw">ggplot</span>(., <span class="kw">aes</span>(mpg, wt)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>())</a>
<a class="sourceLine" id="cb612-5" data-line-number="5">paths &lt;-<span class="st"> </span>stringr<span class="op">::</span><span class="kw">str_c</span>(<span class="kw">names</span>(plots), <span class="st">&quot;.pdf&quot;</span>)</a>
<a class="sourceLine" id="cb612-6" data-line-number="6"></a>
<a class="sourceLine" id="cb612-7" data-line-number="7"><span class="kw">pwalk</span>(<span class="kw">list</span>(paths, plots), ggsave, <span class="dt">path =</span> <span class="kw">tempdir</span>())</a></code></pre></div>
<p><code>walk()</code>, <code>walk2()</code> y <code>pwalk()</code> todas entregan <code>.x</code> invisiblemente, el primer argumento. Esto hace que sea útil para usar con cadenas de pipes.</p>
</div>
<div id="otros-patrones-para-los-loops-for" class="section level2">
<h2><span class="header-section-number">21.9</span> Otros patrones para los loops for</h2>
<p>Purr entrega algunas funciones que se abstraen de los loops for. Los usarás de manera menos frecuente que las funciones map, pero son útiles de conocer. El objetivo aquí es ilustrar brevemente cada función, afortunadamente las recordarás si ves un problema similar en el futuro. Luego puedes consultar la documentación para más detalles.</p>
<div id="funciones-predicativas" class="section level3">
<h3><span class="header-section-number">21.9.1</span> Funciones predicativas</h3>
<p>Algunas funciones trabajan con funciones <em>predicativas</em> que entregan un valor <code>TRUE</code> o <code>FALSE</code>.</p>
<p><code>keep()</code> y <code>discard()</code> mantienen los elementos de la entrada donde el predicado es <code>TRUE</code> o <code>FALSE</code> respectivamente:</p>
<div class="sourceCode" id="cb613"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb613-1" data-line-number="1">iris <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb613-2" data-line-number="2"><span class="st">  </span><span class="kw">keep</span>(is.factor) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb613-3" data-line-number="3"><span class="st">  </span><span class="kw">str</span>()</a>
<a class="sourceLine" id="cb613-4" data-line-number="4"><span class="co">#&gt; &#39;data.frame&#39;:    150 obs. of  1 variable:</span></a>
<a class="sourceLine" id="cb613-5" data-line-number="5"><span class="co">#&gt;  $ Species: Factor w/ 3 levels &quot;setosa&quot;,&quot;versicolor&quot;,..: 1 1 1 1 1 1 1 1 1 1 ...</span></a>
<a class="sourceLine" id="cb613-6" data-line-number="6"></a>
<a class="sourceLine" id="cb613-7" data-line-number="7">iris <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb613-8" data-line-number="8"><span class="st">  </span><span class="kw">discard</span>(is.factor) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb613-9" data-line-number="9"><span class="st">  </span><span class="kw">str</span>()</a>
<a class="sourceLine" id="cb613-10" data-line-number="10"><span class="co">#&gt; &#39;data.frame&#39;:    150 obs. of  4 variables:</span></a>
<a class="sourceLine" id="cb613-11" data-line-number="11"><span class="co">#&gt;  $ Sepal.Length: num  5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ...</span></a>
<a class="sourceLine" id="cb613-12" data-line-number="12"><span class="co">#&gt;  $ Sepal.Width : num  3.5 3 3.2 3.1 3.6 3.9 3.4 3.4 2.9 3.1 ...</span></a>
<a class="sourceLine" id="cb613-13" data-line-number="13"><span class="co">#&gt;  $ Petal.Length: num  1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 ...</span></a>
<a class="sourceLine" id="cb613-14" data-line-number="14"><span class="co">#&gt;  $ Petal.Width : num  0.2 0.2 0.2 0.2 0.2 0.4 0.3 0.2 0.2 0.1 ...</span></a></code></pre></div>
<p><code>some()</code> y <code>every()</code> determinan si el predicado es verdadero para todos o para algunos de los elementos.</p>
<div class="sourceCode" id="cb614"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb614-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, letters, <span class="kw">list</span>(<span class="dv">10</span>))</a>
<a class="sourceLine" id="cb614-2" data-line-number="2"></a>
<a class="sourceLine" id="cb614-3" data-line-number="3">x <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb614-4" data-line-number="4"><span class="st">  </span><span class="kw">some</span>(is_character)</a>
<a class="sourceLine" id="cb614-5" data-line-number="5"><span class="co">#&gt; [1] TRUE</span></a>
<a class="sourceLine" id="cb614-6" data-line-number="6"></a>
<a class="sourceLine" id="cb614-7" data-line-number="7">x <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb614-8" data-line-number="8"><span class="st">  </span><span class="kw">every</span>(is_vector)</a>
<a class="sourceLine" id="cb614-9" data-line-number="9"><span class="co">#&gt; [1] TRUE</span></a></code></pre></div>
<p><code>detect()</code> encuentra el primer elemento donde el predicado es verdadero; <code>detect_index()</code> entrega su posición.</p>
<div class="sourceCode" id="cb615"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb615-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="dv">10</span>)</a>
<a class="sourceLine" id="cb615-2" data-line-number="2">x</a>
<a class="sourceLine" id="cb615-3" data-line-number="3"><span class="co">#&gt;  [1] 10  6  1  3  2  4  5  8  9  7</span></a>
<a class="sourceLine" id="cb615-4" data-line-number="4"></a>
<a class="sourceLine" id="cb615-5" data-line-number="5">x <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb615-6" data-line-number="6"><span class="st">  </span><span class="kw">detect</span>(<span class="op">~</span><span class="st"> </span>. <span class="op">&gt;</span><span class="st"> </span><span class="dv">5</span>)</a>
<a class="sourceLine" id="cb615-7" data-line-number="7"><span class="co">#&gt; [1] 10</span></a>
<a class="sourceLine" id="cb615-8" data-line-number="8"></a>
<a class="sourceLine" id="cb615-9" data-line-number="9">x <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb615-10" data-line-number="10"><span class="st">  </span><span class="kw">detect_index</span>(<span class="op">~</span><span class="st"> </span>. <span class="op">&gt;</span><span class="st"> </span><span class="dv">5</span>)</a>
<a class="sourceLine" id="cb615-11" data-line-number="11"><span class="co">#&gt; [1] 1</span></a></code></pre></div>
<p><code>head_while()</code> y <code>tail_while()</code> toman elementos al inicio y final de un vector cuando el predicado es verdadero:</p>
<div class="sourceCode" id="cb616"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb616-1" data-line-number="1">x <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb616-2" data-line-number="2"><span class="st">  </span><span class="kw">head_while</span>(<span class="op">~</span><span class="st"> </span>. <span class="op">&gt;</span><span class="st"> </span><span class="dv">5</span>)</a>
<a class="sourceLine" id="cb616-3" data-line-number="3"><span class="co">#&gt; [1] 10  6</span></a>
<a class="sourceLine" id="cb616-4" data-line-number="4"></a>
<a class="sourceLine" id="cb616-5" data-line-number="5">x <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb616-6" data-line-number="6"><span class="st">  </span><span class="kw">tail_while</span>(<span class="op">~</span><span class="st"> </span>. <span class="op">&gt;</span><span class="st"> </span><span class="dv">5</span>)</a>
<a class="sourceLine" id="cb616-7" data-line-number="7"><span class="co">#&gt; [1] 8 9 7</span></a></code></pre></div>
</div>
<div id="reduce-y-accumulate" class="section level3">
<h3><span class="header-section-number">21.9.2</span> Reduce y accumulate</h3>
<p>A veces tendrás una lista compleja que quieres reducir a una lista simple aplicando repetidamente una función que reduce un par a un singleton. Esto es útil si quieres aplicar un verbo dplyr de dos tablas a múltiples tablas. Por ejemplo, si tienes una lista de data frames, y quieres reducirla a un unico data frame uniendo los elementos:</p>
<div class="sourceCode" id="cb617"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb617-1" data-line-number="1">dfs &lt;-<span class="st"> </span><span class="kw">list</span>(</a>
<a class="sourceLine" id="cb617-2" data-line-number="2">  <span class="dt">age =</span> <span class="kw">tibble</span>(<span class="dt">name =</span> <span class="st">&quot;John&quot;</span>, <span class="dt">age =</span> <span class="dv">30</span>),</a>
<a class="sourceLine" id="cb617-3" data-line-number="3">  <span class="dt">sex =</span> <span class="kw">tibble</span>(<span class="dt">name =</span> <span class="kw">c</span>(<span class="st">&quot;John&quot;</span>, <span class="st">&quot;Mary&quot;</span>), <span class="dt">sex =</span> <span class="kw">c</span>(<span class="st">&quot;M&quot;</span>, <span class="st">&quot;F&quot;</span>)),</a>
<a class="sourceLine" id="cb617-4" data-line-number="4">  <span class="dt">trt =</span> <span class="kw">tibble</span>(<span class="dt">name =</span> <span class="st">&quot;Mary&quot;</span>, <span class="dt">treatment =</span> <span class="st">&quot;A&quot;</span>)</a>
<a class="sourceLine" id="cb617-5" data-line-number="5">)</a>
<a class="sourceLine" id="cb617-6" data-line-number="6"></a>
<a class="sourceLine" id="cb617-7" data-line-number="7">dfs <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">reduce</span>(full_join)</a>
<a class="sourceLine" id="cb617-8" data-line-number="8"><span class="co">#&gt; Joining, by = &quot;name&quot;</span></a>
<a class="sourceLine" id="cb617-9" data-line-number="9"><span class="co">#&gt; Joining, by = &quot;name&quot;</span></a>
<a class="sourceLine" id="cb617-10" data-line-number="10"><span class="co">#&gt; # A tibble: 2 x 4</span></a>
<a class="sourceLine" id="cb617-11" data-line-number="11"><span class="co">#&gt;   name    age sex   treatment</span></a>
<a class="sourceLine" id="cb617-12" data-line-number="12"><span class="co">#&gt;   &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;    </span></a>
<a class="sourceLine" id="cb617-13" data-line-number="13"><span class="co">#&gt; 1 John     30 M     &lt;NA&gt;     </span></a>
<a class="sourceLine" id="cb617-14" data-line-number="14"><span class="co">#&gt; 2 Mary     NA F     A</span></a></code></pre></div>
<p>O puedes tener una lista de vectores y quieres encontrar la intersección:</p>
<div class="sourceCode" id="cb618"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb618-1" data-line-number="1">vs &lt;-<span class="st"> </span><span class="kw">list</span>(</a>
<a class="sourceLine" id="cb618-2" data-line-number="2">  <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">10</span>),</a>
<a class="sourceLine" id="cb618-3" data-line-number="3">  <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">10</span>),</a>
<a class="sourceLine" id="cb618-4" data-line-number="4">  <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb618-5" data-line-number="5">)</a>
<a class="sourceLine" id="cb618-6" data-line-number="6"></a>
<a class="sourceLine" id="cb618-7" data-line-number="7">vs <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">reduce</span>(intersect)</a>
<a class="sourceLine" id="cb618-8" data-line-number="8"><span class="co">#&gt; [1]  1  3 10</span></a></code></pre></div>
<p>La función <code>reduce()</code> toma una función “binaria” (e.g. una función con dos entradas primarias) y la aplica repetidamente a una lista hasta que resulte un elemento único.</p>
<p><code>accumulate()</code> es similar pero mantiene todos los resultados intermedios. Podría usarse para implementar una suma acumulativa:</p>
<div class="sourceCode" id="cb619"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb619-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="dv">10</span>)</a>
<a class="sourceLine" id="cb619-2" data-line-number="2">x</a>
<a class="sourceLine" id="cb619-3" data-line-number="3"><span class="co">#&gt;  [1]  7  5 10  9  8  3  1  4  2  6</span></a>
<a class="sourceLine" id="cb619-4" data-line-number="4">x <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">accumulate</span>(<span class="st">`</span><span class="dt">+</span><span class="st">`</span>)</a>
<a class="sourceLine" id="cb619-5" data-line-number="5"><span class="co">#&gt;  [1]  7 12 22 31 39 42 43 47 49 55</span></a></code></pre></div>
</div>
<div id="ejercicios-58" class="section level3">
<h3><span class="header-section-number">21.9.3</span> Ejercicios</h3>
<ol style="list-style-type: decimal">
<li><p>Implementa tu propia versión de <code>every()</code> usando un loop for. Comparala con
<code>purrr::every()</code>. ¿Qué hace la versión de purrr que la tuya no hace?</p></li>
<li><p>Crea una mejora de <code>col_sum()</code> que aplique una función de resumen a cada
columna numérica en un data frame.</p></li>
<li><p>Un posible equivalente de <code>col_sum()</code> es:</p>
<div class="sourceCode" id="cb620"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb620-1" data-line-number="1">col_sum3 &lt;-<span class="st"> </span><span class="cf">function</span>(df, f) {</a>
<a class="sourceLine" id="cb620-2" data-line-number="2">  is_num &lt;-<span class="st"> </span><span class="kw">sapply</span>(df, is.numeric)</a>
<a class="sourceLine" id="cb620-3" data-line-number="3">  df_num &lt;-<span class="st"> </span>df[, is_num]</a>
<a class="sourceLine" id="cb620-4" data-line-number="4"></a>
<a class="sourceLine" id="cb620-5" data-line-number="5">  <span class="kw">sapply</span>(df_num, f)</a>
<a class="sourceLine" id="cb620-6" data-line-number="6">}</a></code></pre></div>
<p>Pero tiene una cantidad de bugs que queda ilustrada con las siguientes entradas:</p>
<div class="sourceCode" id="cb621"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb621-1" data-line-number="1">df &lt;-<span class="st"> </span><span class="kw">tibble</span>(</a>
<a class="sourceLine" id="cb621-2" data-line-number="2">  <span class="dt">x =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, </a>
<a class="sourceLine" id="cb621-3" data-line-number="3">  <span class="dt">y =</span> <span class="dv">3</span><span class="op">:</span><span class="dv">1</span>,</a>
<a class="sourceLine" id="cb621-4" data-line-number="4">  <span class="dt">z =</span> <span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>)</a>
<a class="sourceLine" id="cb621-5" data-line-number="5">)</a>
<a class="sourceLine" id="cb621-6" data-line-number="6"><span class="co"># OK</span></a>
<a class="sourceLine" id="cb621-7" data-line-number="7"><span class="kw">col_sum3</span>(df, mean)</a>
<a class="sourceLine" id="cb621-8" data-line-number="8"><span class="co"># Has problems: don&#39;t always return numeric vector</span></a>
<a class="sourceLine" id="cb621-9" data-line-number="9"><span class="kw">col_sum3</span>(df[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>], mean)</a>
<a class="sourceLine" id="cb621-10" data-line-number="10"><span class="kw">col_sum3</span>(df[<span class="dv">1</span>], mean)</a>
<a class="sourceLine" id="cb621-11" data-line-number="11"><span class="kw">col_sum3</span>(df[<span class="dv">0</span>], mean)</a></code></pre></div>
<p>¿Cuál es la causa de esos bugs?</p></li>
</ol>

</div>
</div>
</div>



            </section>

          </div>
        </div>
      </div>
<a href="vectores.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="model-intro.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/cienciadedatos/r4ds/edit/master/21-iteration.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
